2025-05-13 11:25:15,916 - __mp_main__ - INFO - All routers registered successfully
2025-05-13 11:25:15,938 - app - INFO - All routers registered successfully
2025-05-13 11:26:02,580 - __mp_main__ - INFO - All routers registered successfully
2025-05-13 11:26:02,599 - app - INFO - All routers registered successfully
2025-05-13 11:26:15,979 - __mp_main__ - INFO - All routers registered successfully
2025-05-13 11:26:15,999 - app - INFO - All routers registered successfully
2025-05-13 11:26:30,829 - __mp_main__ - INFO - All routers registered successfully
2025-05-13 11:26:30,846 - app - INFO - All routers registered successfully
2025-05-13 11:26:48,291 - __mp_main__ - INFO - All routers registered successfully
2025-05-13 11:26:48,311 - app - INFO - All routers registered successfully
2025-05-13 11:26:58,581 - __mp_main__ - INFO - All routers registered successfully
2025-05-13 11:26:58,607 - app - INFO - All routers registered successfully
2025-05-13 11:29:16,802 - __mp_main__ - ERROR - Error registering routers: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 30, in register_routers
    from src.services.genrate_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/genrate_plan_api.py", line 17, in <module>
    model = PlanModel()
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/agents/plan_agent.py", line 62, in __init__
    self.llm = client = OpenAI()
                        ~~~~~~^^
  File "/Users/doa_ai/Developer/Grab-project/venv/lib/python3.13/site-packages/openai/_client.py", line 116, in __init__
    raise OpenAIError(
        "The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable"
    )
openai.OpenAIError: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable
2025-05-13 11:29:19,921 - __mp_main__ - ERROR - Error registering routers: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 30, in register_routers
    from src.services.genrate_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/genrate_plan_api.py", line 17, in <module>
    model = PlanModel()
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/agents/plan_agent.py", line 62, in __init__
    self.llm = OpenAI()
               ~~~~~~^^
  File "/Users/doa_ai/Developer/Grab-project/venv/lib/python3.13/site-packages/openai/_client.py", line 116, in __init__
    raise OpenAIError(
        "The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable"
    )
openai.OpenAIError: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable
2025-05-13 11:29:38,151 - __mp_main__ - ERROR - Error registering routers: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 30, in register_routers
    from src.services.genrate_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/genrate_plan_api.py", line 17, in <module>
    model = PlanModel()
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/agents/plan_agent.py", line 62, in __init__
    self.llm = OpenAI()
               ~~~~~~^^
  File "/Users/doa_ai/Developer/Grab-project/venv/lib/python3.13/site-packages/openai/_client.py", line 116, in __init__
    raise OpenAIError(
        "The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable"
    )
openai.OpenAIError: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable
2025-05-13 11:29:43,539 - __mp_main__ - ERROR - Error registering routers: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 30, in register_routers
    from src.services.genrate_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/genrate_plan_api.py", line 17, in <module>
    model = PlanModel()
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/agents/plan_agent.py", line 62, in __init__
    self.llm = OpenAI()
               ~~~~~~^^
  File "/Users/doa_ai/Developer/Grab-project/venv/lib/python3.13/site-packages/openai/_client.py", line 116, in __init__
    raise OpenAIError(
        "The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable"
    )
openai.OpenAIError: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable
2025-05-13 11:29:47,023 - __mp_main__ - ERROR - Error registering routers: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 30, in register_routers
    from src.services.genrate_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/genrate_plan_api.py", line 17, in <module>
    model = PlanModel()
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/agents/plan_agent.py", line 62, in __init__
    self.llm = OpenAI()
               ~~~~~~^^
  File "/Users/doa_ai/Developer/Grab-project/venv/lib/python3.13/site-packages/openai/_client.py", line 116, in __init__
    raise OpenAIError(
        "The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable"
    )
openai.OpenAIError: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable
2025-05-13 11:29:53,097 - __mp_main__ - ERROR - Error registering routers: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 30, in register_routers
    from src.services.genrate_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/genrate_plan_api.py", line 17, in <module>
    model = PlanModel()
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/agents/plan_agent.py", line 62, in __init__
    self.llm = OpenAI()
               ~~~~~~^^
  File "/Users/doa_ai/Developer/Grab-project/venv/lib/python3.13/site-packages/openai/_client.py", line 116, in __init__
    raise OpenAIError(
        "The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable"
    )
openai.OpenAIError: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable
2025-05-13 11:29:58,155 - __mp_main__ - ERROR - Error registering routers: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 30, in register_routers
    from src.services.genrate_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/genrate_plan_api.py", line 17, in <module>
    model = PlanModel()
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/agents/plan_agent.py", line 62, in __init__
    self.llm = OpenAI()
               ~~~~~~^^
  File "/Users/doa_ai/Developer/Grab-project/venv/lib/python3.13/site-packages/openai/_client.py", line 116, in __init__
    raise OpenAIError(
        "The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable"
    )
openai.OpenAIError: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable
2025-05-13 11:30:08,645 - __mp_main__ - ERROR - Error registering routers: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 30, in register_routers
    from src.services.genrate_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/genrate_plan_api.py", line 17, in <module>
    model = PlanModel()
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/agents/plan_agent.py", line 62, in __init__
    self.llm = OpenAI()
               ~~~~~~^^
  File "/Users/doa_ai/Developer/Grab-project/venv/lib/python3.13/site-packages/openai/_client.py", line 116, in __init__
    raise OpenAIError(
        "The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable"
    )
openai.OpenAIError: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable
2025-05-13 11:31:17,844 - __mp_main__ - ERROR - Error registering routers: OpenAI.__init__() got an unexpected keyword argument 'temperature'
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 30, in register_routers
    from src.services.genrate_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/genrate_plan_api.py", line 17, in <module>
    model = PlanModel()
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/agents/plan_agent.py", line 62, in __init__
    self.llm = OpenAI(api_key=os.getenv("OPEN_API_KEY"), temperature=temperature, model="gpt-4o", max_tokens=4000)
               ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: OpenAI.__init__() got an unexpected keyword argument 'temperature'
2025-05-13 11:31:21,400 - __mp_main__ - ERROR - Error registering routers: OpenAI.__init__() got an unexpected keyword argument 'temperature'
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/app.py", line 30, in register_routers
    from src.services.genrate_plan_api import router as trip_plan_router
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/genrate_plan_api.py", line 17, in <module>
    model = PlanModel()
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/agents/plan_agent.py", line 62, in __init__
    self.llm = OpenAI(api_key=os.getenv("OPEN_API_KEY"), temperature=temperature, model="gpt-4o", max_tokens=4000)
               ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: OpenAI.__init__() got an unexpected keyword argument 'temperature'
2025-05-13 11:31:35,057 - __mp_main__ - INFO - All routers registered successfully
2025-05-13 11:31:35,081 - app - INFO - All routers registered successfully
2025-05-13 11:32:30,469 - __mp_main__ - INFO - All routers registered successfully
2025-05-13 11:32:30,491 - app - INFO - All routers registered successfully
2025-05-13 11:32:30,493 - src.services.suggest_api - INFO - Processing recommendation query for hochiminh
2025-05-13 11:32:30,500 - src.agents.travel_agent - INFO - Setting up all databases...
2025-05-13 11:32:32,410 - src.agents.travel_agent - INFO - All databases setup completed
2025-05-13 11:32:32,411 - src.agents.travel_agent - INFO - Processing query: 
        Planning a trip to hochiminh with the following details:
        - Group: 2 adults, 1 children, 0 infants
        - Budget: mid (approx. 10000000 VND)
        - Duration: 10 days
        - Season: summer
        - Travel Style: family
        
        Preferences:
        - Transportation: No specific preference
        - Accommodation: Hotel
        - Food: Vegetarian
        - Places to visit: No specific preference
        - Activities: Hiking
        - Extra: No specific preference

        IMPORTANT: Please focus on finding recommendations specifically in hochiminh. All suggestions should be located in or near this destination.
        
        Please suggest:
        1. Suitable accommodations in hochiminh
        2. Interesting activities and places to visit in hochiminh
        3. Recommended restaurants and food options in hochiminh
        
        Consider:
        - The travel style and preferences
        - The season and weather conditions in hochiminh
        - The budget constraints
        - The duration of stay
        - The location and its unique offerings
        - All recommendations must be in hochiminh
        
2025-05-13 11:32:32,411 - src.agents.travel_agent - DEBUG - Sending request to OpenAI...
2025-05-13 11:32:34,961 - src.agents.travel_agent - INFO - OpenAI response: ChatCompletion(id='chatcmpl-BWbbdldjDCqyu4bAaXT2CRUBATzv5', choices=[Choice(finish_reason='function_call', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"hotel in Ho Chi Minh for family with 2 adults and 1 child, mid-range budget, suitable for summer stay","top_k":15}', name='query_hotels'), tool_calls=None))], created=1747110753, model='gpt-4.1-mini-2025-04-14', object='chat.completion', service_tier='default', system_fingerprint='fp_79b79be41f', usage=CompletionUsage(completion_tokens=45, prompt_tokens=1002, total_tokens=1047, completion_tokens_details=CompletionTokensDetails(accepted_prediction_tokens=0, audio_tokens=0, reasoning_tokens=0, rejected_prediction_tokens=0), prompt_tokens_details=PromptTokensDetails(audio_tokens=0, cached_tokens=0)))
2025-05-13 11:32:34,961 - src.agents.travel_agent - INFO - Model response message: ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"hotel in Ho Chi Minh for family with 2 adults and 1 child, mid-range budget, suitable for summer stay","top_k":15}', name='query_hotels'), tool_calls=None)
2025-05-13 11:32:34,961 - src.agents.travel_agent - INFO - Function call: query_hotels
2025-05-13 11:32:34,961 - src.agents.travel_agent - DEBUG - Function arguments: {'query_text': 'hotel in Ho Chi Minh for family with 2 adults and 1 child, mid-range budget, suitable for summer stay', 'top_k': 15}
2025-05-13 11:32:34,961 - src.agents.travel_agent - INFO - Querying all databases with context
2025-05-13 11:32:34,961 - src.agents.travel_agent - INFO - Querying hotels with context: hotel in Ho Chi Minh for family with 2 adults and 1 child, mid-range budget, suitable for summer stay
2025-05-13 11:32:34,961 - src.agents.travel_agent - INFO - top_k for query hotels is: 15
2025-05-13 11:32:34,962 - src.agents.travel_agent - INFO - filter for query hotels is: {'city': {'$eq': 'hochiminh'}}
2025-05-13 11:32:37,486 - src.agents.travel_agent - INFO - Added 15 hotel recommendations
2025-05-13 11:32:37,487 - src.agents.travel_agent - INFO - Querying places with context: hotel in Ho Chi Minh for family with 2 adults and 1 child, mid-range budget, suitable for summer stay
2025-05-13 11:32:37,487 - src.agents.travel_agent - INFO - top_k for query places is: 50
2025-05-13 11:32:37,487 - src.agents.travel_agent - INFO - filter for query places is: {'city': {'$eq': 'hochiminh'}}
2025-05-13 11:32:37,487 - src.agents.travel_agent - INFO - hochiminh)
2025-05-13 11:32:41,241 - src.agents.travel_agent - INFO - ids for query places is: ['place_013240', 'place_001445', 'place_013243', 'place_013228', 'place_013892', 'place_013252', 'place_001752', 'place_013202', 'place_004755', 'place_013231', 'place_015811', 'place_015465', 'place_013938', 'place_013029', 'place_012766', 'place_012842', 'place_013633', 'place_015635', 'place_013850', 'place_015494', 'place_015663', 'place_013254', 'place_013839', 'place_013790', 'place_012691', 'place_013709', 'place_013372', 'place_013542', 'place_015725', 'place_013793', 'place_013746', 'place_013400', 'place_013626', 'place_015719', 'place_015352', 'place_013594', 'place_002414', 'place_014065', 'place_012903', 'place_012814', 'place_013178', 'place_015630', 'place_013620', 'place_013700', 'place_013672', 'place_013864', 'place_014079', 'place_013697', 'place_013381', 'place_012910']
2025-05-13 11:32:41,242 - src.agents.travel_agent - INFO - place_ids: ['place_013240', 'place_001445', 'place_013243', 'place_013228', 'place_013892', 'place_013252', 'place_001752', 'place_013202', 'place_004755', 'place_013231', 'place_015811', 'place_015465', 'place_013938', 'place_013029', 'place_012766', 'place_012842', 'place_013633', 'place_015635', 'place_013850', 'place_015494', 'place_015663', 'place_013254', 'place_013839', 'place_013790', 'place_012691', 'place_013709', 'place_013372', 'place_013542', 'place_015725', 'place_013793', 'place_013746', 'place_013400', 'place_013626', 'place_015719', 'place_015352', 'place_013594', 'place_002414', 'place_014065', 'place_012903', 'place_012814', 'place_013178', 'place_015630', 'place_013620', 'place_013700', 'place_013672', 'place_013864', 'place_014079', 'place_013697', 'place_013381', 'place_012910']
2025-05-13 11:32:41,242 - src.agents.travel_agent - INFO - Added 50 place recommendations
2025-05-13 11:32:41,242 - src.agents.travel_agent - INFO - Querying restaurants with context: hotel in Ho Chi Minh for family with 2 adults and 1 child, mid-range budget, suitable for summer stay
2025-05-13 11:32:41,242 - src.agents.travel_agent - INFO - top_k for query fnb is: 50
2025-05-13 11:32:41,242 - src.agents.travel_agent - INFO - filter for query fnb is: {'city': {'$eq': 'hochiminh'}}
2025-05-13 11:32:44,121 - src.agents.travel_agent - INFO - Added 49 restaurant recommendations
2025-05-13 11:32:44,122 - src.agents.travel_agent - INFO - Final result distribution: 15 hotels, 50 places, 49 restaurants
2025-05-13 11:32:44,122 - src.services.suggest_api - INFO - Recommendation query processed successfully, got 114 items
2025-05-13 11:32:44,122 - src.services.suggest_api - INFO - Grouped recommendations: 15 accommodations, 50 places, 49 restaurants
2025-05-13 11:32:44,122 - src.services.suggest_api - INFO - Final response has 114 items
2025-05-13 11:32:44,280 - src.services.genrate_plan_api - INFO - Received raw trip plan request: dict_keys(['destination_id', 'accommodation', 'places', 'restaurants'])
2025-05-13 11:32:44,280 - src.services.genrate_plan_api - INFO - Extracted 15 accommodations, 50 places, and 49 restaurants
2025-05-13 11:32:44,281 - src.services.genrate_plan_api - INFO - Destination identified as: hochiminh
2025-05-13 11:32:44,281 - src.services.genrate_plan_api - INFO - Generating plan with destination: hochiminh
2025-05-13 11:33:35,437 - src.services.genrate_plan_api - INFO - Generated plan: {'trip_name': 'Trip to Hochiminh', 'start_date': '2025-05-13', 'end_date': '2025-05-15', 'user_id': 'user123', 'destination_id': 'hochiminh', 'plan_by_day': [{'date': '2025-05-13', 'day_title': 'Ng√†y 1: Kh√°m ph√° bi·ªÉn', 'segments': [{'time_of_day': 'morning', 'activities': [{'id': 'hotel_011054', 'type': 'accommodation', 'name': 'Scenic Valley 2 Near SECC, Cresent Mall', 'start_time': '08:00', 'end_time': '10:00', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c t·∫≠n h∆∞·ªüng kh√¥ng gian tho·∫£i m√°i t·∫°i kh√°ch s·∫°n n√†y. ƒê√¢y l√† n∆°i l√Ω t∆∞·ªüng ƒë·ªÉ ngh·ªâ ng∆°i v√† chu·∫©n b·ªã cho h√†nh tr√¨nh kh√°m ph√° th√∫ v·ªùi ph√≠a tr∆∞·ªõc.', 'location': 'Qu·∫≠n 7, TP. H√¥ÃÄ ChiÃÅ Minh', 'rating': 8.4, 'price': 1980000.0, 'image_url': 'https://cf.bstatic.com/xdata/images/hotel/max1024x768/592010155.jpg', 'booking_link': 'https://cf.bstatic.com/xdata/images/hotel/max1024x768/592010155.jpg', 'room_info': '', 'tax_info': 'ƒê√£ bao g·ªìm thu·∫ø v√† ph√≠', 'elderly_friendly': False, 'url': ''}]}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_013240', 'type': 'place', 'name': 'From Ho Chi Minh City: 2-Day Mekong Delta Tour Homestay', 'start_time': '14:00', 'end_time': '16:00', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c kh√°m ph√° ƒë·ªãa ƒëi·ªÉm tuy·ªát v·ªùi n√†y v·ªõi nh·ªØng c·∫£nh quan ƒë·ªôc ƒë√°o. H√£y chu·∫©n b·ªã m√°y ·∫£nh ƒë·ªÉ l∆∞u l·∫°i nh·ªØng kho·∫£nh kh·∫Øc ƒë√°ng nh·ªõ!', 'address': 'TP. H√¥ÃÄ ChiÃÅ Minh', 'categories': '', 'duration': '', 'opening_hours': 'M·ªü c·ª≠a t·ª´ ng√†y mai', 'rating': 5.0, 'price': 89.0, 'image_url': 'https://www.booking.com/attractions/vn/pra5rfmsfykg-2days-1night-stay-homestay-adventure-cycling-kayak-mekong-delta.vi.html?adplat=www-searchresults_irene-web_shell_header-attraction-missing_creative-1HRTulv2EAgQ9bVsRka1O2&aid=304142&label=gen173nr-1FCAQoggJCEHNlYXJjaF9ow6AgbuG7mWlIKlgEaPQBiAEBmAEquAEHyAEM2AEB6AEB-AEDiAIBqAIDuAKV75HABsACAdICJDJjNTc3NTFlLTBkZjctNGFiOC05MjlhLTk3ZTJlYzBhMmE2ZtgCBeACAQ&client_name=b-web-shell-bff&distribution_id=1HRTulv2EAgQ9bVsRka1O2&source=searchresults-product-card&ufi=-3730078', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_013431', 'type': 'restaurant', 'name': 'B√°nh Tr√°ng Kim Ng·ªçc - Nguy·ªÖn Tr√£i', 'start_time': '19:00', 'end_time': '21:00', 'description': 'H√£y c√πng th∆∞·ªüng th·ª©c nh·ªØng m√≥n ƒÉn ƒë·∫∑c s·∫£n ƒë·ªãa ph∆∞∆°ng t·∫°i nh√† h√†ng n√†y. B·∫°n s·∫Ω ƒë∆∞·ª£c ƒë·∫Øm m√¨nh trong h∆∞∆°ng v·ªã ƒë·∫∑c tr∆∞ng kh√¥ng th·ªÉ t√¨m th·∫•y ·ªü n∆°i n√†o kh√°c.', 'address': '402 Nguy·ªÖn Tr√£i, P. 8, Qu·∫≠n 5, TP. HCM', 'cuisines': '', 'price_range': '', 'rating': 4.12, 'phone': '0903112131', 'services': [{'name': 'ShopeeFood', 'url': 'https://www.deliverynow.vn/ho-chi-minh/banh-trang-kim-ngoc-nguyen-trai', 'type': 0}], 'image_url': '', 'url': 'https://www.foody.vn/ho-chi-minh/banh-trang-kim-ngoc-nguyen-trai'}]}], 'daily_tips': ['- N√™n tham gia c√°c tour du l·ªãch ƒë·ªÉ thu·∫≠n ti·ªán h∆°n', '- ƒê·∫∑t v√© tham quan s·ªõm ƒë·ªÉ tr√°nh t√¨nh tr·∫°ng h·∫øt ch·ªó', '- Th·ªùi gian di chuy·ªÉn gi·ªØa c√°c ƒë·ªãa ƒëi·ªÉm kho·∫£ng 1-2 gi·ªù, c·∫ßn l√™n l·ªãch tr∆∞·ªõc', '- N√™n mang theo n∆∞·ªõc u·ªëng v√† ƒë·ªì ƒÉn nh·∫π khi tham quan', '- ƒêeo kh·∫©u trang v√† s√°t khu·∫©n tay ƒë·ªÅ ph√≤ng d·ªãch b·ªánh']}, {'date': '2025-05-14', 'day_title': 'Ng√†y 2: Kh√°m ph√° n√∫i', 'segments': [{'time_of_day': 'morning', 'activities': []}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_013243', 'type': 'place', 'name': '2 Days 1 Nights Cu Chi Tunnels-Mekong Delta Homestay Special Trip', 'start_time': '14:00', 'end_time': '16:00', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c kh√°m ph√° ƒë·ªãa ƒëi·ªÉm tuy·ªát v·ªùi n√†y v·ªõi nh·ªØng c·∫£nh quan ƒë·ªôc ƒë√°o. H√£y chu·∫©n b·ªã m√°y ·∫£nh ƒë·ªÉ l∆∞u l·∫°i nh·ªØng kho·∫£nh kh·∫Øc ƒë√°ng nh·ªõ!', 'address': 'TP. H√¥ÃÄ ChiÃÅ Minh', 'categories': '', 'duration': '', 'opening_hours': 'M·ªü c·ª≠a t·ª´ ng√†y mai', 'rating': 0.0, 'price': 419.0, 'image_url': 'https://www.booking.com/attractions/vn/prefphpgv68d-2-days-1-nights-cu-chi-tunnels-mekong-delta-homestay-special-trip.vi.html?adplat=www-searchresults_irene-web_shell_header-attraction-missing_creative-1HRTulv2EAgQ9bVsRka1O2&aid=304142&label=gen173nr-1FCAQoggJCEHNlYXJjaF9ow6AgbuG7mWlIKlgEaPQBiAEBmAEquAEHyAEM2AEB6AEB-AEDiAIBqAIDuAKV75HABsACAdICJDJjNTc3NTFlLTBkZjctNGFiOC05MjlhLTk3ZTJlYzBhMmE2ZtgCBeACAQ&client_name=b-web-shell-bff&distribution_id=1HRTulv2EAgQ9bVsRka1O2&source=searchresults-product-card&ufi=-3730078', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_014360', 'type': 'restaurant', 'name': 'Lu Hotdog - Hotdog & Hamburger - Phan ƒêƒÉng L∆∞u', 'start_time': '19:00', 'end_time': '21:00', 'description': 'H√£y c√πng th∆∞·ªüng th·ª©c nh·ªØng m√≥n ƒÉn ƒë·∫∑c s·∫£n ƒë·ªãa ph∆∞∆°ng t·∫°i nh√† h√†ng n√†y. B·∫°n s·∫Ω ƒë∆∞·ª£c ƒë·∫Øm m√¨nh trong h∆∞∆°ng v·ªã ƒë·∫∑c tr∆∞ng kh√¥ng th·ªÉ t√¨m th·∫•y ·ªü n∆°i n√†o kh√°c.', 'address': '107 Phan ƒêƒÉng L∆∞u, P. 7, Qu·∫≠n Ph√∫ Nhu·∫≠n, TP. HCM', 'cuisines': '', 'price_range': '', 'rating': 8.0, 'phone': 'ƒêang c·∫≠p nh·∫≠t', 'services': [{'name': 'ShopeeFood', 'url': 'https://www.deliverynow.vn/ho-chi-minh/lu-hotdog-hotdog-hamburger-phan-dang-luu', 'type': 0}], 'image_url': '', 'url': 'https://www.foody.vn/ho-chi-minh/lu-hotdog-hotdog-hamburger-phan-dang-luu'}]}], 'daily_tips': ['- Ch·ªçn th·ªùi gian s√°ng s·ªõm ho·∫∑c bu·ªïi chi·ªÅu ƒë·ªÉ tham quan n√∫i.', '- Chu·∫©n b·ªã ƒë·ªß n∆∞·ªõc u·ªëng v√† th·ª©c ƒÉn khi leo n√∫i.', '- Chu·∫©n b·ªã k·ªπ l∆∞·ª°ng tr∆∞·ªõc khi mua v√© v√†o c·ª≠a ƒë·ªÉ nh·∫≠n ∆∞u ƒë√£i gi·∫£m gi√°.', '- M·∫∑c ƒë·ªì l·ªãch s·ª± khi thƒÉm n√∫i.', '- Mang ƒë·ªß ti·ªÅn m·∫∑t v√† ƒëi·ªán tho·∫°i di ƒë·ªông c√≥ pin d·ª± ph√≤ng khi ƒëi du l·ªãch.']}, {'date': '2025-05-15', 'day_title': 'Ng√†y 3: Kh√°m ph√° vƒÉn h√≥a', 'segments': [{'time_of_day': 'morning', 'activities': []}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_013892', 'type': 'place', 'name': 'Vietnam Family Fun In 9 Days - Departure From Ho Chi Minh', 'start_time': '14:00', 'end_time': '16:00', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c kh√°m ph√° ƒë·ªãa ƒëi·ªÉm tuy·ªát v·ªùi n√†y v·ªõi nh·ªØng c·∫£nh quan ƒë·ªôc ƒë√°o. H√£y chu·∫©n b·ªã m√°y ·∫£nh ƒë·ªÉ l∆∞u l·∫°i nh·ªØng kho·∫£nh kh·∫Øc ƒë√°ng nh·ªõ!', 'address': 'TP. H√¥ÃÄ ChiÃÅ Minh', 'categories': '', 'duration': '', 'opening_hours': 'M·ªü c·ª≠a t·ª´ 13 thg 5', 'rating': 0.0, 'price': 1.91, 'image_url': 'https://www.booking.com/attractions/vn/prdwxqumfquu-vietnam-family-fun-in-9-days-departure-from-ho-chi-minh.vi.html?adplat=www-searchresults_irene-web_shell_header-attraction-missing_creative-1HRTulv2EAgQ9bVsRka1O2&aid=304142&label=gen173nr-1FCAQoggJCEHNlYXJjaF9ow6AgbuG7mWlIKlgEaPQBiAEBmAEquAEHyAEM2AEB6AEB-AEDiAIBqAIDuAKV75HABsACAdICJDJjNTc3NTFlLTBkZjctNGFiOC05MjlhLTk3ZTJlYzBhMmE2ZtgCBeACAQ&client_name=b-web-shell-bff&distribution_id=1HRTulv2EAgQ9bVsRka1O2&source=searchresults-product-card&ufi=-3730078', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_014868', 'type': 'restaurant', 'name': '248 Tr∆∞·ªùng Sa Qu√°n', 'start_time': '19:00', 'end_time': '21:00', 'description': 'H√£y c√πng th∆∞·ªüng th·ª©c nh·ªØng m√≥n ƒÉn ƒë·∫∑c s·∫£n ƒë·ªãa ph∆∞∆°ng t·∫°i nh√† h√†ng n√†y. B·∫°n s·∫Ω ƒë∆∞·ª£c ƒë·∫Øm m√¨nh trong h∆∞∆°ng v·ªã ƒë·∫∑c tr∆∞ng kh√¥ng th·ªÉ t√¨m th·∫•y ·ªü n∆°i n√†o kh√°c.', 'address': '248 Tr∆∞·ªùng Sa, P. 3, Qu·∫≠n B√¨nh Th·∫°nh, TP. HCM', 'cuisines': '', 'price_range': '', 'rating': 7.558, 'phone': '0938003636', 'services': [{'name': 'ShopeeFood', 'url': 'https://www.deliverynow.vn/ho-chi-minh/248-truong-sa-quan', 'type': 0}], 'image_url': '', 'url': 'https://www.foody.vn/ho-chi-minh/248-truong-sa-quan'}]}], 'daily_tips': ['- N√™n b·∫Øt ƒë·∫ßu s·ªõm t·ª´ 6-8h s√°ng khi thƒÉm th√†nh ph·ªë H·ªì Ch√≠ Minh ƒë·ªÉ tr√°nh n√≥ng v√† ƒë√¥ng ƒë√∫c.', '- S·ª≠ d·ª•ng Grab ho·∫∑c taxi ch√≠nh h√£ng khi di chuy·ªÉn ·ªü H·ªì Ch√≠ Minh ƒë·ªÉ tr√°nh b·ªã l·ª´a ƒë·∫£o.', '- D·ª± ki·∫øn chi ph√≠ kho·∫£ng 500.000 - 1.000.000 VND m·ªói ng√†y khi du l·ªãch t·∫°i H·ªì Ch√≠ Minh.', '- Tr√°nh mua h√†ng t·∫°i c√°c ƒëi·ªÉm du l·ªãch n·ªïi ti·∫øng ƒë·ªÉ ti·∫øt ki·ªám.', '- T√¥n tr·ªçng vƒÉn h√≥a ƒë·ªãa ph∆∞∆°ng khi ƒÉn u·ªëng t·∫°i c√°c qu√°n ƒÉn ·ªü H·ªì Ch√≠ Minh.']}]}
2025-05-13 11:33:35,440 - src.services.genrate_plan_api - INFO - Trip plan request processed successfully
2025-05-13 11:33:57,492 - __mp_main__ - INFO - All routers registered successfully
2025-05-13 11:33:57,522 - app - INFO - All routers registered successfully
2025-05-13 11:34:20,323 - __mp_main__ - INFO - All routers registered successfully
2025-05-13 11:34:20,346 - app - INFO - All routers registered successfully
2025-05-13 11:34:29,239 - __mp_main__ - INFO - All routers registered successfully
2025-05-13 11:34:29,284 - app - INFO - All routers registered successfully
2025-05-13 11:34:33,894 - src.services.suggest_api - INFO - Processing recommendation query for hochiminh
2025-05-13 11:34:33,907 - src.agents.travel_agent - INFO - Setting up all databases...
2025-05-13 11:34:36,365 - src.agents.travel_agent - INFO - All databases setup completed
2025-05-13 11:34:36,366 - src.agents.travel_agent - INFO - Processing query: 
        Planning a trip to hochiminh with the following details:
        - Group: 2 adults, 1 children, 0 infants
        - Budget: mid (approx. 10000000 VND)
        - Duration: 10 days
        - Season: summer
        - Travel Style: family
        
        Preferences:
        - Transportation: No specific preference
        - Accommodation: Hotel
        - Food: Vegetarian
        - Places to visit: No specific preference
        - Activities: Hiking
        - Extra: No specific preference

        IMPORTANT: Please focus on finding recommendations specifically in hochiminh. All suggestions should be located in or near this destination.
        
        Please suggest:
        1. Suitable accommodations in hochiminh
        2. Interesting activities and places to visit in hochiminh
        3. Recommended restaurants and food options in hochiminh
        
        Consider:
        - The travel style and preferences
        - The season and weather conditions in hochiminh
        - The budget constraints
        - The duration of stay
        - The location and its unique offerings
        - All recommendations must be in hochiminh
        
2025-05-13 11:34:36,366 - src.agents.travel_agent - DEBUG - Sending request to OpenAI...
2025-05-13 11:34:37,891 - src.agents.travel_agent - INFO - OpenAI response: ChatCompletion(id='chatcmpl-BWbdclkLe1zwlgI51aghJyFpOjwbx', choices=[Choice(finish_reason='function_call', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"hotel in Hochiminh suitable for family, mid budget, 2 adults and 1 child, summer travel","top_k":15}', name='query_hotels'), tool_calls=None))], created=1747110876, model='gpt-4.1-mini-2025-04-14', object='chat.completion', service_tier='default', system_fingerprint='fp_79b79be41f', usage=CompletionUsage(completion_tokens=43, prompt_tokens=1002, total_tokens=1045, completion_tokens_details=CompletionTokensDetails(accepted_prediction_tokens=0, audio_tokens=0, reasoning_tokens=0, rejected_prediction_tokens=0), prompt_tokens_details=PromptTokensDetails(audio_tokens=0, cached_tokens=0)))
2025-05-13 11:34:37,892 - src.agents.travel_agent - INFO - Model response message: ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"hotel in Hochiminh suitable for family, mid budget, 2 adults and 1 child, summer travel","top_k":15}', name='query_hotels'), tool_calls=None)
2025-05-13 11:34:37,892 - src.agents.travel_agent - INFO - Function call: query_hotels
2025-05-13 11:34:37,892 - src.agents.travel_agent - DEBUG - Function arguments: {'query_text': 'hotel in Hochiminh suitable for family, mid budget, 2 adults and 1 child, summer travel', 'top_k': 15}
2025-05-13 11:34:37,892 - src.agents.travel_agent - INFO - Querying all databases with context
2025-05-13 11:34:37,892 - src.agents.travel_agent - INFO - Querying hotels with context: hotel in Hochiminh suitable for family, mid budget, 2 adults and 1 child, summer travel
2025-05-13 11:34:37,892 - src.agents.travel_agent - INFO - top_k for query hotels is: 15
2025-05-13 11:34:37,892 - src.agents.travel_agent - INFO - filter for query hotels is: {'city': {'$eq': 'hochiminh'}}
2025-05-13 11:34:40,119 - src.agents.travel_agent - INFO - Added 15 hotel recommendations
2025-05-13 11:34:40,119 - src.agents.travel_agent - INFO - Querying places with context: hotel in Hochiminh suitable for family, mid budget, 2 adults and 1 child, summer travel
2025-05-13 11:34:40,119 - src.agents.travel_agent - INFO - top_k for query places is: 50
2025-05-13 11:34:40,119 - src.agents.travel_agent - INFO - filter for query places is: {'city': {'$eq': 'hochiminh'}}
2025-05-13 11:34:40,119 - src.agents.travel_agent - INFO - hochiminh)
2025-05-13 11:34:42,398 - src.agents.travel_agent - INFO - ids for query places is: ['place_013240', 'place_013252', 'place_013892', 'place_001445', 'place_015663', 'place_012842', 'place_015465', 'place_015616', 'place_013372', 'place_013938', 'place_004755', 'place_013381', 'place_013254', 'place_015494', 'place_013243', 'place_015811', 'place_013793', 'place_013202', 'place_013414', 'place_013228', 'place_013594', 'place_015719', 'place_012691', 'place_012696', 'place_013850', 'place_013564', 'place_013241', 'place_012814', 'place_013461', 'place_015630', 'place_001471', 'place_013592', 'place_013864', 'place_012925', 'place_013790', 'place_013231', 'place_013709', 'place_004185', 'place_013878', 'place_001616', 'place_013029', 'place_013633', 'place_015725', 'place_014065', 'place_015784', 'place_001507', 'place_015644', 'place_015635', 'place_004718', 'place_001543']
2025-05-13 11:34:42,398 - src.agents.travel_agent - INFO - place_ids: ['place_013240', 'place_013252', 'place_013892', 'place_001445', 'place_015663', 'place_012842', 'place_015465', 'place_015616', 'place_013372', 'place_013938', 'place_004755', 'place_013381', 'place_013254', 'place_015494', 'place_013243', 'place_015811', 'place_013793', 'place_013202', 'place_013414', 'place_013228', 'place_013594', 'place_015719', 'place_012691', 'place_012696', 'place_013850', 'place_013564', 'place_013241', 'place_012814', 'place_013461', 'place_015630', 'place_001471', 'place_013592', 'place_013864', 'place_012925', 'place_013790', 'place_013231', 'place_013709', 'place_004185', 'place_013878', 'place_001616', 'place_013029', 'place_013633', 'place_015725', 'place_014065', 'place_015784', 'place_001507', 'place_015644', 'place_015635', 'place_004718', 'place_001543']
2025-05-13 11:34:42,398 - src.agents.travel_agent - INFO - Added 50 place recommendations
2025-05-13 11:34:42,398 - src.agents.travel_agent - INFO - Querying restaurants with context: hotel in Hochiminh suitable for family, mid budget, 2 adults and 1 child, summer travel
2025-05-13 11:34:42,398 - src.agents.travel_agent - INFO - top_k for query fnb is: 50
2025-05-13 11:34:42,398 - src.agents.travel_agent - INFO - filter for query fnb is: {'city': {'$eq': 'hochiminh'}}
2025-05-13 11:34:44,953 - src.agents.travel_agent - INFO - Added 47 restaurant recommendations
2025-05-13 11:34:44,953 - src.agents.travel_agent - INFO - Final result distribution: 15 hotels, 50 places, 47 restaurants
2025-05-13 11:34:44,953 - src.services.suggest_api - INFO - Recommendation query processed successfully, got 112 items
2025-05-13 11:34:44,953 - src.services.suggest_api - INFO - Grouped recommendations: 15 accommodations, 50 places, 47 restaurants
2025-05-13 11:34:44,954 - src.services.suggest_api - INFO - Final response has 112 items
2025-05-13 11:34:45,080 - src.services.genrate_plan_api - INFO - Received raw trip plan request: dict_keys(['destination_id', 'accommodation', 'places', 'restaurants'])
2025-05-13 11:34:45,080 - src.services.genrate_plan_api - INFO - Extracted 15 accommodations, 50 places, and 47 restaurants
2025-05-13 11:34:45,080 - src.services.genrate_plan_api - INFO - Destination identified as: hochiminh
2025-05-13 11:34:45,080 - src.services.genrate_plan_api - INFO - Generating plan with destination: hochiminh
2025-05-13 11:36:27,109 - src.services.genrate_plan_api - INFO - Generated plan: {'trip_name': 'Trip to Hochiminh', 'start_date': '2025-05-13', 'end_date': '2025-05-15', 'user_id': 'user123', 'destination_id': 'hochiminh', 'plan_by_day': [{'date': '2025-05-13', 'day_title': 'Ng√†y 1: S√†i G√≤n nƒÉng ƒë·ªông r·ª±c r·ª°', 'segments': [{'time_of_day': 'morning', 'activities': [{'id': 'hotel_011054', 'type': 'accommodation', 'name': 'Scenic Valley 2 Near SECC, Cresent Mall', 'start_time': '08:00', 'end_time': '09:00', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c th∆∞ gi√£n t·∫°i kh√°ch s·∫°n hi·ªán ƒë·∫°i, view ƒë·∫πp trung t√¢m qu·∫≠n 7. üè®', 'location': 'S·ªë 801 Nguy·ªÖn VƒÉn Linh, P. T√¢n Ph√∫, Qu·∫≠n 7, TP.HCM', 'rating': 4.6, 'price': 1100000.0, 'image_url': '', 'booking_link': '', 'room_info': 'Ph√≤ng ti√™u chu·∫©n', 'tax_info': 'ƒê√£ bao g·ªìm thu·∫ø', 'elderly_friendly': True, 'url': ''}, {'id': 'place_004755', 'type': 'place', 'name': 'Eden Spa', 'start_time': '09:15', 'end_time': '10:30', 'description': 'Ch√∫ng ta s·∫Ω tr·∫£i nghi·ªám massage th∆∞ gi√£n, n·∫°p l·∫°i nƒÉng l∆∞·ª£ng cho ng√†y m·ªõi. üíÜ', 'address': '44 Nguy·ªÖn Duy Hi·ªáu, TP.HCM', 'categories': 'spa, relaxation', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.5, 'price': 350000.0, 'image_url': '', 'url': ''}, {'id': 'restaurant_014770', 'type': 'restaurant', 'name': 'LongBuri Cancook - G√¢n B√≤, Ch√¢n G√† S·ªët Th√°i', 'start_time': '10:45', 'end_time': '11:45', 'description': 'B·∫°n s·∫Ω th∆∞·ªüng th·ª©c c√°c m√≥n g√¢n b√≤, ch√¢n g√† s·ªët Th√°i l·∫° mi·ªáng c·ª±c ngon. üçó', 'address': '198 Nguy·ªÖn Tr√£i, Qu·∫≠n 1, TP.HCM', 'cuisines': 'm√≥n Th√°i, c√°c m√≥n nh·∫≠u', 'price_range': '100,000-300,000 VND', 'rating': 4.2, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}]}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_001543', 'type': 'place', 'name': 'Sky Tourist', 'start_time': '13:00', 'end_time': '14:15', 'description': 'Ch√∫ng ta s·∫Ω ng·∫Øm to√†n c·∫£nh th√†nh ph·ªë t·ª´ ƒë·ªô cao c·ª±c ch·∫•t, check-in tuy·ªát v·ªùi! üèôÔ∏è', 'address': '36 L√™ L·ª£i, Qu·∫≠n 1, TP.HCM', 'categories': 'ng·∫Øm c·∫£nh, gi·∫£i tr√≠', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.3, 'price': 150000.0, 'image_url': '', 'url': ''}, {'id': 'restaurant_014631', 'type': 'restaurant', 'name': 'Qu√°n C∆°m Bapy', 'start_time': '14:30', 'end_time': '15:30', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c th∆∞·ªüng th·ª©c c√°c m√≥n c∆°m Vi·ªát ngon, no b·ª•ng gi·ªØa th√†nh ph·ªë t·∫•p n·∫≠p. üçö', 'address': '325 Nguy·ªÖn Tr√£i, Qu·∫≠n 5, TP.HCM', 'cuisines': '·∫©m th·ª±c Vi·ªát', 'price_range': '100,000-300,000 VND', 'rating': 4.1, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}, {'id': 'place_004718', 'type': 'place', 'name': 'Ria Spa - Massage Hochiminh', 'start_time': '15:45', 'end_time': '17:15', 'description': 'Ch√∫ng ta s·∫Ω ƒë∆∞·ª£c chƒÉm s√≥c da v√† th∆∞ gi√£n v·ªõi c√°c li·ªáu tr√¨nh ƒë·∫∑c bi·ªát. üåø', 'address': '19-21 ƒêinh Ti√™n Ho√†ng, Qu·∫≠n 1, TP.HCM', 'categories': 'spa, chƒÉm s√≥c s·ª©c kh·ªèe', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.4, 'price': 300000.0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_013028', 'type': 'restaurant', 'name': 'Happy - Steak & Chicken', 'start_time': '18:00', 'end_time': '19:15', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c th∆∞·ªüng th·ª©c b√≠t t·∫øt v√† g√† n∆∞·ªõng ngon chu·∫©n √Çu gi·ªØa S√†i G√≤n s√¥i ƒë·ªông. ü•©', 'address': '94A C·ªëng Qu·ª≥nh, Qu·∫≠n 1, TP.HCM', 'cuisines': 'b√≠t t·∫øt, g√† n∆∞·ªõng', 'price_range': '100,000-300,000 VND', 'rating': 4.3, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}, {'id': 'restaurant_014136', 'type': 'restaurant', 'name': 'Kem B·∫°ch ƒê·∫±ng', 'start_time': '19:30', 'end_time': '20:00', 'description': 'Ch√∫ng ta c√πng th∆∞·ªüng th·ª©c kem B·∫°ch ƒê·∫±ng truy·ªÅn th·ªëng n·ªïi ti·∫øng. üç®', 'address': '26 L√™ L·ª£i, Qu·∫≠n 1, TP.HCM', 'cuisines': 'kem, tr√°ng mi·ªáng', 'price_range': '100,000-300,000 VND', 'rating': 4.0, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}, {'id': 'restaurant_013537', 'type': 'restaurant', 'name': 'The Daymaker Coffee - Cao Th·∫Øng', 'start_time': '20:15', 'end_time': '21:00', 'description': 'B·∫°n s·∫Ω t·∫≠n h∆∞·ªüng kh√¥ng gian caf√© tr·∫ª trung, k·∫øt th√∫c ng√†y tuy·ªát v·ªùi. ‚òï', 'address': '62 Cao Th·∫Øng, Qu·∫≠n 3, TP.HCM', 'cuisines': 'c√† ph√™, ƒë·ªì u·ªëng', 'price_range': '100,000-300,000 VND', 'rating': 4.3, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}]}], 'daily_tips': ['- N√™n chu·∫©n b·ªã gi·∫•y t·ªù t√πy th√¢n khi tham quan C·ªß Chi', '- ƒêi ch·ª£ B·∫øn Th√†nh v√†o bu·ªïi t·ªëi ƒë·ªÉ mua s·∫Øm v·ªõi gi√° r·∫ª h∆°n', '- T·∫≠n h∆∞·ªüng ·∫©m th·ª±c ƒë∆∞·ªùng ph·ªë t·∫°i qu·∫≠n 1', '- Tham quan Nh√† th·ªù ƒê·ª©c B√† v√†o l√∫c ho√†ng h√¥n ƒë·ªÉ c·∫£m nh·∫≠n kh√¥ng gian y√™n b√¨nh', '- Gh√© C√¥ng vi√™n 30/4 v√†o bu·ªïi s√°ng ƒë·ªÉ t·∫≠n h∆∞·ªüng kh√¥ng kh√≠ trong l√†nh', '- C·∫©n th·∫≠n v·ªõi c√°c v·ª• m·∫•t c·∫Øp khi ƒëi tham quan ·ªü ph·ªë c·ªï H·ªôi An']}, {'date': '2025-05-14', 'day_title': 'Ng√†y 2: S√¥i ƒë·ªông ph·ªë ph∆∞∆°ng Nam', 'segments': [{'time_of_day': 'morning', 'activities': [{'id': 'place_015616', 'type': 'place', 'name': 'City Half Day by car', 'start_time': '08:00', 'end_time': '09:40', 'description': 'Ch√∫ng ta s·∫Ω tham quan th√†nh ph·ªë s√¥i ƒë·ªông tr√™n xe h∆°i, ng·∫Øm c·∫£nh ƒë√¥ th·ªã r·ª±c r·ª° üöó.', 'address': 'Qu·∫≠n 1, TP.HCM', 'categories': 'city tour', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.6, 'price': 320000.0, 'image_url': 'https://static.example.com/tour_car.jpg', 'url': 'https://hochi.minh/city-half-day-by-car'}, {'id': 'restaurant_013428', 'type': 'restaurant', 'name': 'B√°nh M√¨ Heo Quay A Nhi·ªÅu - Ph·∫°m H√πng', 'start_time': '09:40', 'end_time': '10:15', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c n·∫øm b√°nh m√¨ heo quay gi√≤n th∆°m, chu·∫©n v·ªã S√†i G√≤n ü•ñ.', 'address': '402 Ph·∫°m H√πng, B√¨nh Ch√°nh, TP.HCM', 'cuisines': 'B√°nh m√¨, ƒê·∫∑c s·∫£n', 'price_range': '100,000-300,000 VND', 'rating': 4.4, 'phone': '0933 348 673', 'services': ['ƒë·∫∑t b√†n'], 'image_url': 'https://static.example.com/banhmi.jpg', 'url': 'https://banhmi-phanhung.nhi'}, {'id': 'place_015719', 'type': 'place', 'name': 'Small Group Cu Chi Tunnels Half Day', 'start_time': '10:15', 'end_time': '12:00', 'description': 'Kh√°m ph√° ƒë∆∞·ªùng h·∫ßm huy·ªÅn tho·∫°i, tr·∫£i nghi·ªám c·∫£m gi√°c l·ªãch s·ª≠ s√¢u s·∫Øc üî¶.', 'address': 'T·ªânh l·ªô 15, C·ªß Chi, TP.HCM', 'categories': 'history, adventure', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.7, 'price': 400000.0, 'image_url': 'https://static.example.com/cu-chi-tunnel.jpg', 'url': 'https://hochiminh/cuchi-halfday'}]}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_013372', 'type': 'place', 'name': 'Small-group 2-Day Mekong Delta: Floating market, Cooking Class...', 'start_time': '13:30', 'end_time': '15:00', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c ghe xu·ªìng kh√°m ph√° ch·ª£ n·ªïi, th·ª≠ l·ªõp h·ªçc n·∫•u ƒÉn truy·ªÅn th·ªëng üõ∂.', 'address': 'Mekong Delta', 'categories': 'culture, floating market', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.8, 'price': 1350000.0, 'image_url': 'https://static.example.com/mekong-market.jpg', 'url': 'https://tourmekong.vn'}, {'id': 'restaurant_014680', 'type': 'restaurant', 'name': 'Daruma Sushi - Th·∫°nh L·ªôc 16', 'start_time': '15:00', 'end_time': '16:00', 'description': 'Th∆∞·ªüng th·ª©c sushi t∆∞∆°i ngon gi·ªØa l√≤ng S√†i G√≤n üç£.', 'address': '18 Th·∫°nh L·ªôc 16, Qu·∫≠n 12, TP.HCM', 'cuisines': 'Sushi, Nh·∫≠t', 'price_range': '100,000-300,000 VND', 'rating': 4.3, 'phone': '0932 144 246', 'services': ['ƒë·∫∑t b√†n'], 'image_url': 'https://static.example.com/daruma.jpg', 'url': 'https://daruma-sushi.vn'}, {'id': 'place_012814', 'type': 'place', 'name': 'Mekong Delta Day Trip: Explore Cycling & Cooking Classes at Farm', 'start_time': '16:10', 'end_time': '17:30', 'description': 'Ch√∫ng ta s·∫Ω ƒë·∫°p xe gi·ªØa ru·ªông ƒë·ªìng v√† h·ªçc n·∫•u ƒÉn v·ªõi ng∆∞·ªùi b·∫£n ƒë·ªãa üö≤.', 'address': 'Mekong Delta', 'categories': 'cycling, cooking', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.7, 'price': 650000.0, 'image_url': 'https://static.example.com/mekong-farm.jpg', 'url': 'https://mekongcycling.vn'}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_013335', 'type': 'restaurant', 'name': 'B√† L√¢m - Ch√°o V·ªãt & G·ªèi', 'start_time': '18:30', 'end_time': '19:30', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c th∆∞·ªüng th·ª©c ch√°o v·ªãt n√≥ng h·ªïi ƒë·∫∑c tr∆∞ng mi·ªÅn Nam üç≤.', 'address': '73/1A, Phan ƒêƒÉng L∆∞u, Qu·∫≠n B√¨nh Th·∫°nh, TP.HCM', 'cuisines': 'Ch√°o v·ªãt, m√≥n Vi·ªát', 'price_range': '100,000-300,000 VND', 'rating': 4.5, 'phone': '0977 325 473', 'services': ['ƒë·∫∑t b√†n'], 'image_url': 'https://static.example.com/chaovit.jpg', 'url': 'https://chaovitbalam.vn'}, {'id': 'restaurant_014109', 'type': 'restaurant', 'name': 'Tr√† S·ªØa Nghi·ªán - Shop Online - C·∫ßu X√©o', 'start_time': '19:30', 'end_time': '20:00', 'description': 'Th∆∞·ªüng th·ª©c tr√† s·ªØa th∆°m m√°t, b√©o ng·∫≠y chu·∫©n S√†i G√≤n üßã.', 'address': '26 C·∫ßu X√©o, T√¢n Ph√∫, TP.HCM', 'cuisines': 'Tr√† s·ªØa, ƒë·ªì u·ªëng', 'price_range': '100,000-300,000 VND', 'rating': 4.2, 'phone': '0987 897 645', 'services': ['ƒë·∫∑t b√†n'], 'image_url': 'https://static.example.com/trasua.jpg', 'url': 'https://trasuannghien.vn'}, {'id': 'place_013892', 'type': 'place', 'name': 'Vietnam Family Fun In 9 Days - Departure From Ho Chi Minh', 'start_time': '20:10', 'end_time': '21:30', 'description': 'Kh√°m ph√° tr√≤ ch∆°i d√¢n gian vui nh·ªôn c√πng gia ƒë√¨nh t·∫°i trung t√¢m S√†i G√≤n üéâ.', 'address': 'Qu·∫≠n 1, TP.HCM', 'categories': 'familiy, culture', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.6, 'price': 850000.0, 'image_url': 'https://static.example.com/familyfun.jpg', 'url': 'https://vietnamfamilyfun.vn'}]}], 'daily_tips': ['N√™n b·∫Øt ƒë·∫ßu s·ªõm ƒë·ªÉ tr√°nh n√≥ng v√† ƒë√¥ng ƒë√∫c.', 'T√¥n tr·ªçng vƒÉn h√≥a ƒë·ªãa ph∆∞∆°ng.', 'ƒê·∫∑t d·ªãch v·ª• tr∆∞·ªõc ƒë·ªÉ tr√°nh h·∫øt ch·ªó.', 'C·∫©n th·∫≠n v·ªõi vi·ªác m·∫•t c·∫Øp.']}, {'date': '2025-05-15', 'day_title': 'Ng√†y 3: ƒê·∫Øm m√¨nh h∆∞∆°ng v·ªã S√†i G√≤n m·ªõi l·∫°', 'segments': [{'time_of_day': 'morning', 'activities': [{'id': 'place_013252', 'type': 'place', 'name': 'Must-see: A day to Cuchi Tunnels & Mekong Delta', 'start_time': '08:00', 'end_time': '09:30', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c len l·ªèi qua ƒë·ªãa ƒë·∫°o C·ªß Chi, kh√°m ph√° b√≠ m·∫≠t d∆∞·ªõi l√≤ng ƒë·∫•t.üï≥Ô∏è', 'address': 'C·ªß Chi, TP.HCM', 'categories': 'exploration,history', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.7, 'price': 320000.0, 'image_url': '', 'url': ''}, {'id': 'restaurant_013889', 'type': 'restaurant', 'name': 'G·ªèi Cu·ªën T√¥m Nh·∫£y', 'start_time': '09:50', 'end_time': '10:30', 'description': 'Ch√∫ng ta s·∫Ω th∆∞·ªüng th·ª©c g·ªèi cu·ªën t∆∞∆°i ngon, ƒë·∫≠m ch·∫•t mi·ªÅn Nam! ü•¢', 'address': '67/1B Nguy·ªÖn Th√¥ng, Q.3', 'cuisines': 'M√≥n Vi·ªát, G·ªèi cu·ªën', 'price_range': '100,000-300,000 VND', 'rating': 4.2, 'phone': '0928289955', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}, {'id': 'place_001445', 'type': 'place', 'name': 'Hot Sulphur Springs Resort & Spa', 'start_time': '10:40', 'end_time': '11:50', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c th∆∞ gi√£n trong su·ªëi n∆∞·ªõc n√≥ng v√† t·∫≠n h∆∞·ªüng d·ªãch v·ª• spa ƒë·∫≥ng c·∫•p.üíß', 'address': 'Ph∆∞·ªõc Ki·ªÉn, Nh√† B√®, TP.HCM', 'categories': 'spa,relaxation', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.6, 'price': 150000.0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_013793', 'type': 'place', 'name': 'Essential Mekong Delta 2 days,1Night', 'start_time': '13:00', 'end_time': '14:15', 'description': 'B·∫°n s·∫Ω l√™n thuy·ªÅn kh√°m ph√° s√¥ng n∆∞·ªõc C·ª≠u Long ƒë·ªôc ƒë√°o.‚õµ', 'address': 'Mekong Delta, TP.HCM', 'categories': 'river,local life', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.8, 'price': 490000.0, 'image_url': '', 'url': ''}, {'id': 'restaurant_012971', 'type': 'restaurant', 'name': 'G√† R√°n & Burger Lotteria - V√†nh ƒêai Trong', 'start_time': '14:30', 'end_time': '15:10', 'description': 'C√πng th∆∞·ªüng th·ª©c v·ªã g√† r√°n gi√≤n r·ª•m n·ªïi ti·∫øng. üçó', 'address': '34 ƒê∆∞·ªùng V√†nh ƒêai Trong, Q.B√¨nh T√¢n', 'cuisines': 'G√† r√°n, ƒê·ªì ƒÉn nhanh', 'price_range': '100,000-300,000 VND', 'rating': 4.0, 'phone': '02839393939', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}, {'id': 'place_013850', 'type': 'place', 'name': 'Private Ho Chi Minh City Tour Half-day by Car', 'start_time': '15:20', 'end_time': '16:30', 'description': 'Ch√∫ng ta s·∫Ω vi vu tham quan th√†nh ph·ªë b·∫±ng xe ri√™ng si√™u th√∫ v·ªã! üöó', 'address': 'TP.HCM', 'categories': 'city tour,private', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.7, 'price': 550000.0, 'image_url': '', 'url': ''}, {'id': 'restaurant_013263', 'type': 'restaurant', 'name': '33MAMA - Pizza & G√† R√°n - ·∫§p ƒê√¨nh', 'start_time': '16:40', 'end_time': '17:20', 'description': 'Gh√© 33MAMA th∆∞·ªüng th·ª©c pizza n√≥ng h·ªïi & g√† r√°n th∆°m ph·ª©c. üçï', 'address': '123 ·∫§p ƒê√¨nh, Q.12', 'cuisines': 'Pizza, G√† r√°n', 'price_range': '100,000-300,000 VND', 'rating': 4.3, 'phone': '0912334567', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_014360', 'type': 'restaurant', 'name': 'Lu Hotdog - Hotdog & Hamburger - Phan ƒêƒÉng L∆∞u', 'start_time': '18:10', 'end_time': '18:50', 'description': 'B·∫°n s·∫Ω th∆∞·ªüng th·ª©c hotdog th∆°m l·ª´ng gi·ªØa l√≤ng th√†nh ph·ªë.üå≠', 'address': '11 Phan ƒêƒÉng L∆∞u, Q.B√¨nh Th·∫°nh', 'cuisines': 'Hotdog, Hamburger', 'price_range': '100,000-300,000 VND', 'rating': 4.1, 'phone': '0937889555', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}, {'id': 'place_012696', 'type': 'place', 'name': 'Ho Chi Minh City Private Half-Day Tour by U.S Army Jeep', 'start_time': '19:10', 'end_time': '20:30', 'description': 'Ch√∫ng ta s·∫Ω kh√°m ph√° S√†i G√≤n ƒë√™m ƒë·ªôc ƒë√°o tr√™n chi·∫øc xe Jeep c·ªï!üöô', 'address': 'TP.HCM', 'categories': 'night tour,adventure', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.9, 'price': 680000.0, 'image_url': '', 'url': ''}, {'id': 'restaurant_014285', 'type': 'restaurant', 'name': 'Ph·ªü 24 - Grand View', 'start_time': '20:40', 'end_time': '21:30', 'description': 'Th∆∞·ªüng th·ª©c ph·ªü Vi·ªát chu·∫©n v·ªã trong kh√¥ng gian sang tr·ªçng.üçú', 'address': '24 ƒê·ªìng Kh·ªüi, Q.1', 'cuisines': 'Ph·ªü, ƒê·∫∑c s·∫£n Vi·ªát', 'price_range': '100,000-300,000 VND', 'rating': 4.4, 'phone': '02839252525', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}]}], 'daily_tips': ['- N√™n b·∫Øt ƒë·∫ßu s·ªõm t·ª´ 6-8h s√°ng ƒë·ªÉ tr√°nh n√≥ng v√† ƒë√¥ng ƒë√∫c.', '- N·∫øu ƒë·∫øn **Ch·ª£ B·∫øn Th√†nh**, h√£y th·ª≠ nh·ªØng m√≥n ƒÉn ƒë∆∞·ªùng ph·ªë ngon l√†nh.', '- ƒê·ªÉ di chuy·ªÉn thu·∫≠n ti·ªán, n√™n s·ª≠ d·ª•ng Grab ho·∫∑c taxi ch√≠nh h√£ng.', '- ƒê·∫∑t th·ªùi gian thƒÉm **B·∫£o T√†ng Ch·ª©ng T√≠ch Chi·∫øn Tranh** ƒë·ªÉ hi·ªÉu r√µ h∆°n v·ªÅ l·ªãch s·ª≠ Vi·ªát Nam.', '- ƒê·∫øn **Nh√† Th·ªù ƒê·ª©c B√†** v√†o bu·ªïi s√°ng ƒë·ªÉ c√≥ kh√¥ng gian y√™n tƒ©nh v√† tho√°ng ƒë√£ng.', '- N·∫øu c√≥ th·ªùi gian, h√£y gh√© qua **Lotte Mart** ƒë·ªÉ mua s·∫Øm ƒë·∫∑c s·∫£n v√πng mi·ªÅn.']}]}
2025-05-13 11:36:27,112 - src.services.genrate_plan_api - INFO - Trip plan request processed successfully
