2025-05-11 00:19:42,355 - __main__ - INFO - All routers registered successfully
2025-05-11 00:19:47,484 - __mp_main__ - INFO - All routers registered successfully
2025-05-11 00:19:47,513 - app - INFO - All routers registered successfully
2025-05-11 00:20:41,989 - __mp_main__ - INFO - All routers registered successfully
2025-05-11 00:20:42,080 - app - INFO - All routers registered successfully
2025-05-11 00:23:28,713 - __mp_main__ - INFO - All routers registered successfully
2025-05-11 00:23:28,746 - app - INFO - All routers registered successfully
2025-05-11 00:33:44,964 - __mp_main__ - INFO - All routers registered successfully
2025-05-11 00:33:44,987 - app - INFO - All routers registered successfully
2025-05-11 00:37:53,833 - __mp_main__ - INFO - All routers registered successfully
2025-05-11 00:37:53,853 - app - INFO - All routers registered successfully
2025-05-11 00:46:15,263 - __mp_main__ - INFO - All routers registered successfully
2025-05-11 00:46:15,294 - app - INFO - All routers registered successfully
2025-05-11 00:46:15,298 - src.services.suggest_api - INFO - Processing recommendation query for hanoi
2025-05-11 00:46:15,306 - src.agents.travel_agent - INFO - Setting up all databases...
2025-05-11 00:46:17,287 - src.agents.travel_agent - INFO - All databases setup completed
2025-05-11 00:46:17,287 - src.agents.travel_agent - INFO - Processing query: 
        Planning a trip to hanoi with the following details:
        - Group: 2 adults, 1 children, 0 infants
        - Budget: mid (approx. 10000000 VND)
        - Duration: 10 days
        - Season: summer
        - Travel Style: family
        
        Preferences:
        - Transportation: No specific preference
        - Accommodation: Hotel
        - Food: Vegetarian
        - Places to visit: No specific preference
        - Activities: Hiking
        - Extra: No specific preference
        Please suggest:
        1. Suitable accommodations
        2. Interesting activities and places to visit
        3. Recommended restaurants and food options
        
        Consider:
        - The travel style and preferences
        - The season and weather conditions
        - The budget constraints
        - The duration of stay
        - The location and its unique offerings
        
2025-05-11 00:46:17,287 - src.agents.travel_agent - DEBUG - Sending request to OpenAI...
2025-05-11 00:46:19,579 - src.agents.travel_agent - INFO - OpenAI response: ChatCompletion(id='chatcmpl-BViZ895k7wGknR4uoNmFMFdN4bc9P', choices=[Choice(finish_reason='function_call', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"hotel in Hanoi suitable for family with children mid budget","top_k":15}', name='query_hotels'), tool_calls=None))], created=1746899178, model='gpt-4.1-mini-2025-04-14', object='chat.completion', service_tier='default', system_fingerprint='fp_79b79be41f', usage=CompletionUsage(completion_tokens=31, prompt_tokens=948, total_tokens=979, completion_tokens_details=CompletionTokensDetails(accepted_prediction_tokens=0, audio_tokens=0, reasoning_tokens=0, rejected_prediction_tokens=0), prompt_tokens_details=PromptTokensDetails(audio_tokens=0, cached_tokens=0)))
2025-05-11 00:46:19,580 - src.agents.travel_agent - INFO - Model response message: ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"hotel in Hanoi suitable for family with children mid budget","top_k":15}', name='query_hotels'), tool_calls=None)
2025-05-11 00:46:19,580 - src.agents.travel_agent - INFO - Function call: query_hotels
2025-05-11 00:46:19,581 - src.agents.travel_agent - DEBUG - Function arguments: {'query_text': 'hotel in Hanoi suitable for family with children mid budget', 'top_k': 15}
2025-05-11 00:46:19,581 - src.agents.travel_agent - INFO - Querying all databases with context
2025-05-11 00:46:19,581 - src.agents.travel_agent - INFO - Querying hotels with context: hotel in Hanoi suitable for family with children mid budget
2025-05-11 00:46:24,661 - src.agents.travel_agent - INFO - Added 15 hotel recommendations
2025-05-11 00:46:24,661 - src.agents.travel_agent - INFO - Querying places with context: hotel in Hanoi suitable for family with children mid budget
2025-05-11 00:46:27,753 - src.agents.travel_agent - INFO - place_ids: ['place_000345', 'place_000416', 'place_004755', 'place_006512', 'place_010621', 'place_007854', 'place_005433', 'place_000117', 'place_000384', 'place_000583', 'place_000870', 'place_000728', 'place_000409', 'place_000068', 'place_000010', 'place_000688', 'place_000543', 'place_000830', 'place_000382', 'place_009936', 'place_002378', 'place_003692', 'place_011025', 'place_002238', 'place_008450', 'place_002934', 'place_004219', 'place_010085', 'place_006634', 'place_008762', 'place_005493', 'place_009809', 'place_009189', 'place_003348', 'place_001445', 'place_005895', 'place_007237', 'place_001909', 'place_010755', 'place_004816']
2025-05-11 00:46:27,753 - src.agents.travel_agent - INFO - Added 40 place recommendations
2025-05-11 00:46:27,753 - src.agents.travel_agent - INFO - Querying restaurants with context: hotel in Hanoi suitable for family with children mid budget
2025-05-11 00:46:27,753 - src.agents.travel_agent - INFO - Attempting to query FnB with text: hotel in Hanoi suitable for family with children mid budget, top_k: 40
2025-05-11 00:46:30,827 - src.agents.travel_agent - INFO - FnB query returned 40 results
2025-05-11 00:46:30,827 - src.agents.travel_agent - INFO - Added 40 restaurant recommendations
2025-05-11 00:46:30,827 - src.agents.travel_agent - INFO - Final result distribution: 15 hotels, 40 places, 40 restaurants
2025-05-11 00:46:30,827 - src.services.suggest_api - INFO - Recommendation query processed successfully, got 95 items
2025-05-11 00:46:30,827 - src.services.suggest_api - INFO - Grouped recommendations: 15 accommodations, 40 places, 40 restaurants
2025-05-11 00:46:30,827 - src.services.suggest_api - INFO - Final response has 95 items
2025-05-11 00:46:30,838 - src.services.suggest_api - INFO - Processing recommendation query for hanoi
2025-05-11 00:46:30,846 - src.agents.travel_agent - INFO - Setting up all databases...
2025-05-11 00:46:33,316 - src.agents.travel_agent - INFO - All databases setup completed
2025-05-11 00:46:33,316 - src.agents.travel_agent - INFO - Processing query: 
        Planning a trip to hanoi with the following details:
        - Group: 2 adults, 1 children, 0 infants
        - Budget: mid (approx. 10000000 VND)
        - Duration: 10 days
        - Season: summer
        - Travel Style: family
        
        Preferences:
        - Transportation: No specific preference
        - Accommodation: Hotel
        - Food: Vegetarian
        - Places to visit: No specific preference
        - Activities: Hiking
        - Extra: No specific preference
        Please suggest:
        1. Suitable accommodations
        2. Interesting activities and places to visit
        3. Recommended restaurants and food options
        
        Consider:
        - The travel style and preferences
        - The season and weather conditions
        - The budget constraints
        - The duration of stay
        - The location and its unique offerings
        
2025-05-11 00:46:33,316 - src.agents.travel_agent - DEBUG - Sending request to OpenAI...
2025-05-11 00:46:35,671 - src.agents.travel_agent - INFO - OpenAI response: ChatCompletion(id='chatcmpl-BViZOofMuBsk8BGIYWZU654NnNoNy', choices=[Choice(finish_reason='function_call', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"Hotel in Hanoi suitable for family with 2 adults and 1 child, mid budget around 10000000 VND for 10 days, summer season, family travel style","top_k":15}', name='query_hotels'), tool_calls=None))], created=1746899194, model='gpt-4.1-mini-2025-04-14', object='chat.completion', service_tier='default', system_fingerprint='fp_79b79be41f', usage=CompletionUsage(completion_tokens=56, prompt_tokens=948, total_tokens=1004, completion_tokens_details=CompletionTokensDetails(accepted_prediction_tokens=0, audio_tokens=0, reasoning_tokens=0, rejected_prediction_tokens=0), prompt_tokens_details=PromptTokensDetails(audio_tokens=0, cached_tokens=0)))
2025-05-11 00:46:35,671 - src.agents.travel_agent - INFO - Model response message: ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"Hotel in Hanoi suitable for family with 2 adults and 1 child, mid budget around 10000000 VND for 10 days, summer season, family travel style","top_k":15}', name='query_hotels'), tool_calls=None)
2025-05-11 00:46:35,671 - src.agents.travel_agent - INFO - Function call: query_hotels
2025-05-11 00:46:35,671 - src.agents.travel_agent - DEBUG - Function arguments: {'query_text': 'Hotel in Hanoi suitable for family with 2 adults and 1 child, mid budget around 10000000 VND for 10 days, summer season, family travel style', 'top_k': 15}
2025-05-11 00:46:35,671 - src.agents.travel_agent - INFO - Querying all databases with context
2025-05-11 00:46:35,671 - src.agents.travel_agent - INFO - Querying hotels with context: Hotel in Hanoi suitable for family with 2 adults and 1 child, mid budget around 10000000 VND for 10 days, summer season, family travel style
2025-05-11 00:46:38,908 - src.agents.travel_agent - INFO - Added 15 hotel recommendations
2025-05-11 00:46:38,908 - src.agents.travel_agent - INFO - Querying places with context: Hotel in Hanoi suitable for family with 2 adults and 1 child, mid budget around 10000000 VND for 10 days, summer season, family travel style
2025-05-11 00:46:41,708 - src.agents.travel_agent - INFO - place_ids: ['place_000416', 'place_000010', 'place_000117', 'place_000345', 'place_000409', 'place_000688', 'place_000830', 'place_000543', 'place_000204', 'place_000382', 'place_000122', 'place_000069', 'place_000583', 'place_000728', 'place_000870', 'place_010383', 'place_007617', 'place_009142', 'place_002207', 'place_009569', 'place_005196', 'place_005791', 'place_002758', 'place_007116', 'place_004517', 'place_010578', 'place_001743', 'place_003990', 'place_006275', 'place_007813', 'place_006471', 'place_005392', 'place_004712', 'place_004185', 'place_009765', 'place_000068', 'place_000216', 'place_009936', 'place_000262', 'place_000251']
2025-05-11 00:46:41,708 - src.agents.travel_agent - INFO - Added 40 place recommendations
2025-05-11 00:46:41,708 - src.agents.travel_agent - INFO - Querying restaurants with context: Hotel in Hanoi suitable for family with 2 adults and 1 child, mid budget around 10000000 VND for 10 days, summer season, family travel style
2025-05-11 00:46:41,708 - src.agents.travel_agent - INFO - Attempting to query FnB with text: Hotel in Hanoi suitable for family with 2 adults and 1 child, mid budget around 10000000 VND for 10 days, summer season, family travel style, top_k: 40
2025-05-11 00:46:44,869 - src.agents.travel_agent - INFO - FnB query returned 40 results
2025-05-11 00:46:44,869 - src.agents.travel_agent - INFO - Added 40 restaurant recommendations
2025-05-11 00:46:44,869 - src.agents.travel_agent - INFO - Final result distribution: 15 hotels, 40 places, 40 restaurants
2025-05-11 00:46:44,869 - src.services.suggest_api - INFO - Recommendation query processed successfully, got 95 items
2025-05-11 00:46:44,869 - src.services.suggest_api - INFO - Grouped recommendations: 15 accommodations, 40 places, 40 restaurants
2025-05-11 00:46:44,869 - src.services.suggest_api - INFO - Final response has 95 items
2025-05-11 00:46:44,881 - src.services.genrate_plan_api - INFO - Received raw trip plan request: dict_keys(['destination_id', 'accommodation', 'places', 'restaurants'])
2025-05-11 00:46:44,881 - src.services.genrate_plan_api - INFO - Extracted 15 accommodations, 40 places, and 40 restaurants
2025-05-11 00:46:44,881 - src.services.genrate_plan_api - INFO - Destination identified as: hanoi
2025-05-11 00:46:44,881 - src.services.genrate_plan_api - INFO - Generating plan with destination: hanoi
2025-05-11 00:47:10,431 - src.services.genrate_plan_api - INFO - Generated plan: {'error': 'asyncio.run() cannot be called from a running event loop', 'trip_name': 'Trip to Hanoi', 'start_date': '2025-05-11', 'end_date': '2025-05-13', 'destination_id': 'hanoi', 'plan_by_day': []}
2025-05-11 00:47:10,433 - src.services.genrate_plan_api - INFO - Trip plan request processed successfully
2025-05-11 00:47:10,458 - src.services.genrate_plan_api - INFO - Received raw trip plan request: dict_keys(['destination_id', 'accommodation', 'places', 'restaurants'])
2025-05-11 00:47:10,458 - src.services.genrate_plan_api - INFO - Extracted 15 accommodations, 40 places, and 40 restaurants
2025-05-11 00:47:10,458 - src.services.genrate_plan_api - INFO - Destination identified as: hanoi
2025-05-11 00:47:10,459 - src.services.genrate_plan_api - INFO - Generating plan with destination: hanoi
2025-05-11 00:47:33,113 - src.services.genrate_plan_api - INFO - Generated plan: {'error': 'asyncio.run() cannot be called from a running event loop', 'trip_name': 'Trip to Hanoi', 'start_date': '2025-05-11', 'end_date': '2025-05-13', 'destination_id': 'hanoi', 'plan_by_day': []}
2025-05-11 00:47:33,113 - src.services.genrate_plan_api - INFO - Trip plan request processed successfully
2025-05-11 00:57:30,299 - __mp_main__ - INFO - All routers registered successfully
2025-05-11 00:57:30,325 - app - INFO - All routers registered successfully
2025-05-11 00:57:30,326 - src.services.suggest_api - INFO - Processing recommendation query for hanoi
2025-05-11 00:57:30,335 - src.agents.travel_agent - INFO - Setting up all databases...
2025-05-11 00:57:32,003 - src.agents.travel_agent - INFO - All databases setup completed
2025-05-11 00:57:32,003 - src.agents.travel_agent - INFO - Processing query: 
        Planning a trip to hanoi with the following details:
        - Group: 2 adults, 1 children, 0 infants
        - Budget: mid (approx. 10000000 VND)
        - Duration: 10 days
        - Season: summer
        - Travel Style: family
        
        Preferences:
        - Transportation: No specific preference
        - Accommodation: Hotel
        - Food: Vegetarian
        - Places to visit: No specific preference
        - Activities: Hiking
        - Extra: No specific preference
        Please suggest:
        1. Suitable accommodations
        2. Interesting activities and places to visit
        3. Recommended restaurants and food options
        
        Consider:
        - The travel style and preferences
        - The season and weather conditions
        - The budget constraints
        - The duration of stay
        - The location and its unique offerings
        
2025-05-11 00:57:32,004 - src.agents.travel_agent - DEBUG - Sending request to OpenAI...
2025-05-11 00:57:34,130 - src.agents.travel_agent - INFO - OpenAI response: ChatCompletion(id='chatcmpl-BVik1UNW2DEOxqLwvxLxeDJ4AZrmL', choices=[Choice(finish_reason='function_call', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"hotel in Hanoi suitable for family with 2 adults and 1 child, mid-range budget, summer season, family travel style","top_k":15}', name='query_hotels'), tool_calls=None))], created=1746899853, model='gpt-4.1-mini-2025-04-14', object='chat.completion', service_tier='default', system_fingerprint='fp_79b79be41f', usage=CompletionUsage(completion_tokens=46, prompt_tokens=948, total_tokens=994, completion_tokens_details=CompletionTokensDetails(accepted_prediction_tokens=0, audio_tokens=0, reasoning_tokens=0, rejected_prediction_tokens=0), prompt_tokens_details=PromptTokensDetails(audio_tokens=0, cached_tokens=0)))
2025-05-11 00:57:34,133 - src.agents.travel_agent - INFO - Model response message: ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"hotel in Hanoi suitable for family with 2 adults and 1 child, mid-range budget, summer season, family travel style","top_k":15}', name='query_hotels'), tool_calls=None)
2025-05-11 00:57:34,135 - src.agents.travel_agent - INFO - Function call: query_hotels
2025-05-11 00:57:34,135 - src.agents.travel_agent - DEBUG - Function arguments: {'query_text': 'hotel in Hanoi suitable for family with 2 adults and 1 child, mid-range budget, summer season, family travel style', 'top_k': 15}
2025-05-11 00:57:34,135 - src.agents.travel_agent - INFO - Querying all databases with context
2025-05-11 00:57:34,136 - src.agents.travel_agent - INFO - Querying hotels with context: hotel in Hanoi suitable for family with 2 adults and 1 child, mid-range budget, summer season, family travel style
2025-05-11 00:57:39,013 - src.agents.travel_agent - INFO - Added 15 hotel recommendations
2025-05-11 00:57:39,014 - src.agents.travel_agent - INFO - Querying places with context: hotel in Hanoi suitable for family with 2 adults and 1 child, mid-range budget, summer season, family travel style
2025-05-11 00:57:43,121 - src.agents.travel_agent - INFO - place_ids: ['place_000068', 'place_000416', 'place_000409', 'place_000345', 'place_000117', 'place_000010', 'place_009936', 'place_003692', 'place_007237', 'place_010085', 'place_010755', 'place_008450', 'place_009189', 'place_002238', 'place_011025', 'place_001909', 'place_004219', 'place_008762', 'place_009809', 'place_003348', 'place_006634', 'place_001445', 'place_005493', 'place_005895', 'place_002934', 'place_003155', 'place_002378', 'place_004816', 'place_006736', 'place_007979', 'place_000216', 'place_000728', 'place_000583', 'place_000870', 'place_000382', 'place_000830', 'place_000543', 'place_000688', 'place_000204', 'place_000069']
2025-05-11 00:57:43,121 - src.agents.travel_agent - INFO - Added 40 place recommendations
2025-05-11 00:57:43,121 - src.agents.travel_agent - INFO - Querying restaurants with context: hotel in Hanoi suitable for family with 2 adults and 1 child, mid-range budget, summer season, family travel style
2025-05-11 00:57:43,121 - src.agents.travel_agent - INFO - Attempting to query FnB with text: hotel in Hanoi suitable for family with 2 adults and 1 child, mid-range budget, summer season, family travel style, top_k: 40
2025-05-11 00:57:46,053 - src.agents.travel_agent - INFO - FnB query returned 40 results
2025-05-11 00:57:46,053 - src.agents.travel_agent - INFO - Added 40 restaurant recommendations
2025-05-11 00:57:46,053 - src.agents.travel_agent - INFO - Final result distribution: 15 hotels, 40 places, 40 restaurants
2025-05-11 00:57:46,053 - src.services.suggest_api - INFO - Recommendation query processed successfully, got 95 items
2025-05-11 00:57:46,053 - src.services.suggest_api - INFO - Grouped recommendations: 15 accommodations, 40 places, 40 restaurants
2025-05-11 00:57:46,054 - src.services.suggest_api - INFO - Final response has 95 items
2025-05-11 00:57:46,067 - src.services.suggest_api - INFO - Processing recommendation query for hanoi
2025-05-11 00:57:46,079 - src.agents.travel_agent - INFO - Setting up all databases...
2025-05-11 00:57:48,732 - src.agents.travel_agent - INFO - All databases setup completed
2025-05-11 00:57:48,732 - src.agents.travel_agent - INFO - Processing query: 
        Planning a trip to hanoi with the following details:
        - Group: 2 adults, 1 children, 0 infants
        - Budget: mid (approx. 10000000 VND)
        - Duration: 10 days
        - Season: summer
        - Travel Style: family
        
        Preferences:
        - Transportation: No specific preference
        - Accommodation: Hotel
        - Food: Vegetarian
        - Places to visit: No specific preference
        - Activities: Hiking
        - Extra: No specific preference
        Please suggest:
        1. Suitable accommodations
        2. Interesting activities and places to visit
        3. Recommended restaurants and food options
        
        Consider:
        - The travel style and preferences
        - The season and weather conditions
        - The budget constraints
        - The duration of stay
        - The location and its unique offerings
        
2025-05-11 00:57:48,732 - src.agents.travel_agent - DEBUG - Sending request to OpenAI...
2025-05-11 00:57:50,409 - src.agents.travel_agent - INFO - OpenAI response: ChatCompletion(id='chatcmpl-BVikHUFP6ckvYgrhm6f1hfaNLs8pr', choices=[Choice(finish_reason='function_call', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"family-friendly hotel in Hanoi with mid-range budget","top_k":15}', name='query_hotels'), tool_calls=None))], created=1746899869, model='gpt-4.1-mini-2025-04-14', object='chat.completion', service_tier='default', system_fingerprint='fp_79b79be41f', usage=CompletionUsage(completion_tokens=30, prompt_tokens=948, total_tokens=978, completion_tokens_details=CompletionTokensDetails(accepted_prediction_tokens=0, audio_tokens=0, reasoning_tokens=0, rejected_prediction_tokens=0), prompt_tokens_details=PromptTokensDetails(audio_tokens=0, cached_tokens=0)))
2025-05-11 00:57:50,409 - src.agents.travel_agent - INFO - Model response message: ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"family-friendly hotel in Hanoi with mid-range budget","top_k":15}', name='query_hotels'), tool_calls=None)
2025-05-11 00:57:50,410 - src.agents.travel_agent - INFO - Function call: query_hotels
2025-05-11 00:57:50,410 - src.agents.travel_agent - DEBUG - Function arguments: {'query_text': 'family-friendly hotel in Hanoi with mid-range budget', 'top_k': 15}
2025-05-11 00:57:50,410 - src.agents.travel_agent - INFO - Querying all databases with context
2025-05-11 00:57:50,410 - src.agents.travel_agent - INFO - Querying hotels with context: family-friendly hotel in Hanoi with mid-range budget
2025-05-11 00:57:56,588 - src.agents.travel_agent - INFO - Added 15 hotel recommendations
2025-05-11 00:57:56,588 - src.agents.travel_agent - INFO - Querying places with context: family-friendly hotel in Hanoi with mid-range budget
2025-05-11 00:57:59,132 - src.agents.travel_agent - INFO - place_ids: ['place_000345', 'place_010621', 'place_007854', 'place_006512', 'place_004755', 'place_005433', 'place_000583', 'place_000870', 'place_000728', 'place_000416', 'place_000543', 'place_000688', 'place_000830', 'place_000068', 'place_000384', 'place_000205', 'place_000409', 'place_000117', 'place_011734', 'place_011507', 'place_011249', 'place_011374', 'place_011097', 'place_011825', 'place_000382', 'place_000220', 'place_000010', 'place_000924', 'place_000457', 'place_000012', 'place_000463', 'place_000018', 'place_009761', 'place_006467', 'place_004184', 'place_007809', 'place_005388', 'place_004711', 'place_010577', 'place_012148']
2025-05-11 00:57:59,132 - src.agents.travel_agent - INFO - Added 40 place recommendations
2025-05-11 00:57:59,132 - src.agents.travel_agent - INFO - Querying restaurants with context: family-friendly hotel in Hanoi with mid-range budget
2025-05-11 00:57:59,132 - src.agents.travel_agent - INFO - Attempting to query FnB with text: family-friendly hotel in Hanoi with mid-range budget, top_k: 40
2025-05-11 00:58:02,288 - src.agents.travel_agent - INFO - FnB query returned 40 results
2025-05-11 00:58:02,289 - src.agents.travel_agent - INFO - Added 40 restaurant recommendations
2025-05-11 00:58:02,289 - src.agents.travel_agent - INFO - Final result distribution: 15 hotels, 40 places, 40 restaurants
2025-05-11 00:58:02,289 - src.services.suggest_api - INFO - Recommendation query processed successfully, got 95 items
2025-05-11 00:58:02,289 - src.services.suggest_api - INFO - Grouped recommendations: 15 accommodations, 40 places, 40 restaurants
2025-05-11 00:58:02,289 - src.services.suggest_api - INFO - Final response has 95 items
2025-05-11 00:58:02,300 - src.services.genrate_plan_api - INFO - Received raw trip plan request: dict_keys(['destination_id', 'accommodation', 'places', 'restaurants'])
2025-05-11 00:58:02,301 - src.services.genrate_plan_api - INFO - Extracted 15 accommodations, 40 places, and 40 restaurants
2025-05-11 00:58:02,301 - src.services.genrate_plan_api - INFO - Destination identified as: hanoi
2025-05-11 00:58:02,301 - src.services.genrate_plan_api - INFO - Generating plan with destination: hanoi
2025-05-11 00:58:34,535 - src.services.genrate_plan_api - ERROR - Error processing trip plan request: '_asyncio.Task' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/genrate_plan_api.py", line 146, in get_trip_plan
    if not result.get("start_date") or result["start_date"] == "":
           ^^^^^^^^^^
AttributeError: '_asyncio.Task' object has no attribute 'get'
2025-05-11 00:58:36,671 - src.services.genrate_plan_api - INFO - Received raw trip plan request: dict_keys(['destination_id', 'accommodation', 'places', 'restaurants'])
2025-05-11 00:58:36,671 - src.services.genrate_plan_api - INFO - Extracted 15 accommodations, 40 places, and 40 restaurants
2025-05-11 00:58:36,671 - src.services.genrate_plan_api - INFO - Destination identified as: hanoi
2025-05-11 00:58:36,672 - src.services.genrate_plan_api - INFO - Generating plan with destination: hanoi
2025-05-11 00:58:59,481 - src.services.genrate_plan_api - ERROR - Error processing trip plan request: '_asyncio.Task' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/doa_ai/Developer/Grab-project/ai/model/src/services/genrate_plan_api.py", line 146, in get_trip_plan
    if not result.get("start_date") or result["start_date"] == "":
           ^^^^^^^^^^
AttributeError: '_asyncio.Task' object has no attribute 'get'
2025-05-11 00:59:43,140 - __mp_main__ - INFO - All routers registered successfully
2025-05-11 00:59:43,172 - app - INFO - All routers registered successfully
2025-05-11 00:59:47,273 - src.services.suggest_api - INFO - Processing recommendation query for hanoi
2025-05-11 00:59:47,290 - src.agents.travel_agent - INFO - Setting up all databases...
2025-05-11 00:59:49,269 - src.agents.travel_agent - INFO - All databases setup completed
2025-05-11 00:59:49,269 - src.agents.travel_agent - INFO - Processing query: 
        Planning a trip to hanoi with the following details:
        - Group: 2 adults, 1 children, 0 infants
        - Budget: mid (approx. 10000000 VND)
        - Duration: 10 days
        - Season: summer
        - Travel Style: family
        
        Preferences:
        - Transportation: No specific preference
        - Accommodation: Hotel
        - Food: Vegetarian
        - Places to visit: No specific preference
        - Activities: Hiking
        - Extra: No specific preference
        Please suggest:
        1. Suitable accommodations
        2. Interesting activities and places to visit
        3. Recommended restaurants and food options
        
        Consider:
        - The travel style and preferences
        - The season and weather conditions
        - The budget constraints
        - The duration of stay
        - The location and its unique offerings
        
2025-05-11 00:59:49,269 - src.agents.travel_agent - DEBUG - Sending request to OpenAI...
2025-05-11 00:59:50,679 - src.agents.travel_agent - INFO - OpenAI response: ChatCompletion(id='chatcmpl-BVimD5cDLUPFKB4IhnRWk3u4gAEfG', choices=[Choice(finish_reason='function_call', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"Hanoi family hotel mid budget summer","top_k":15}', name='query_hotels'), tool_calls=None))], created=1746899989, model='gpt-4.1-mini-2025-04-14', object='chat.completion', service_tier='default', system_fingerprint='fp_79b79be41f', usage=CompletionUsage(completion_tokens=28, prompt_tokens=948, total_tokens=976, completion_tokens_details=CompletionTokensDetails(accepted_prediction_tokens=0, audio_tokens=0, reasoning_tokens=0, rejected_prediction_tokens=0), prompt_tokens_details=PromptTokensDetails(audio_tokens=0, cached_tokens=0)))
2025-05-11 00:59:50,680 - src.agents.travel_agent - INFO - Model response message: ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"Hanoi family hotel mid budget summer","top_k":15}', name='query_hotels'), tool_calls=None)
2025-05-11 00:59:50,680 - src.agents.travel_agent - INFO - Function call: query_hotels
2025-05-11 00:59:50,680 - src.agents.travel_agent - DEBUG - Function arguments: {'query_text': 'Hanoi family hotel mid budget summer', 'top_k': 15}
2025-05-11 00:59:50,680 - src.agents.travel_agent - INFO - Querying all databases with context
2025-05-11 00:59:50,680 - src.agents.travel_agent - INFO - Querying hotels with context: Hanoi family hotel mid budget summer
2025-05-11 00:59:53,432 - src.agents.travel_agent - INFO - Added 15 hotel recommendations
2025-05-11 00:59:53,432 - src.agents.travel_agent - INFO - Querying places with context: Hanoi family hotel mid budget summer
2025-05-11 00:59:56,224 - src.agents.travel_agent - INFO - place_ids: ['place_000068', 'place_000345', 'place_000416', 'place_000117', 'place_000830', 'place_000688', 'place_000543', 'place_000384', 'place_012148', 'place_000409', 'place_000010', 'place_000069', 'place_000382', 'place_006512', 'place_007854', 'place_004755', 'place_010621', 'place_005433', 'place_000870', 'place_000583', 'place_000728', 'place_000924', 'place_000208', 'place_000022', 'place_000457', 'place_000077', 'place_000205', 'place_000012', 'place_000226', 'place_000204', 'place_000946', 'place_000183', 'place_000160', 'place_000125', 'place_011249', 'place_011825', 'place_011374', 'place_011507', 'place_011734', 'place_011097']
2025-05-11 00:59:56,225 - src.agents.travel_agent - INFO - Added 40 place recommendations
2025-05-11 00:59:56,226 - src.agents.travel_agent - INFO - Querying restaurants with context: Hanoi family hotel mid budget summer
2025-05-11 00:59:56,226 - src.agents.travel_agent - INFO - Attempting to query FnB with text: Hanoi family hotel mid budget summer, top_k: 40
2025-05-11 00:59:59,170 - src.agents.travel_agent - INFO - FnB query returned 40 results
2025-05-11 00:59:59,170 - src.agents.travel_agent - INFO - Added 40 restaurant recommendations
2025-05-11 00:59:59,170 - src.agents.travel_agent - INFO - Final result distribution: 15 hotels, 40 places, 40 restaurants
2025-05-11 00:59:59,170 - src.services.suggest_api - INFO - Recommendation query processed successfully, got 95 items
2025-05-11 00:59:59,170 - src.services.suggest_api - INFO - Grouped recommendations: 15 accommodations, 40 places, 40 restaurants
2025-05-11 00:59:59,171 - src.services.suggest_api - INFO - Final response has 95 items
2025-05-11 00:59:59,306 - src.services.genrate_plan_api - INFO - Received raw trip plan request: dict_keys(['destination_id', 'accommodation', 'places', 'restaurants'])
2025-05-11 00:59:59,306 - src.services.genrate_plan_api - INFO - Extracted 15 accommodations, 40 places, and 40 restaurants
2025-05-11 00:59:59,306 - src.services.genrate_plan_api - INFO - Destination identified as: hanoi
2025-05-11 00:59:59,306 - src.services.genrate_plan_api - INFO - Generating plan with destination: hanoi
2025-05-11 01:00:30,430 - src.services.genrate_plan_api - INFO - Generated plan: {'trip_name': 'Trip to Hanoi', 'start_date': '2025-05-11', 'end_date': '2025-05-13', 'user_id': 'user123', 'destination_id': 'hanoi', 'plan_by_day': [{'date': '2025-05-11', 'day_title': 'Ng√†y 1: Kh√°m ph√° H√† N·ªôi c·ªï k√≠nh', 'segments': [{'time_of_day': 'morning', 'activities': [{'id': 'hotel_008170', 'type': 'accommodation', 'name': 'Luxury Hanoi Hotel', 'start_time': '08:00', 'end_time': '10:00', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c ngh·ªâ ng∆°i t·∫°i kh√°ch s·∫°n sang tr·ªçng gi·ªØa l√≤ng H√† N·ªôi.', 'location': 'H√† N·ªôi', 'rating': 4.7, 'price': 1200000.0, 'image_url': '', 'booking_link': '', 'room_info': 'Ph√≤ng ti√™u chu·∫©n', 'tax_info': 'ƒê√£ bao g·ªìm thu·∫ø', 'elderly_friendly': True, 'url': ''}]}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_000068', 'type': 'place', 'name': 'Green Pool', 'start_time': '13:00', 'end_time': '15:00', 'description': 'Ch√∫ng ta s·∫Ω t·∫≠n h∆∞·ªüng kh√¥ng gian xanh m√°t v√† y√™n b√¨nh.', 'address': 'H√† N·ªôi', 'categories': 'nature', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.4, 'price': 0, 'image_url': '', 'url': ''}, {'id': 'place_000345', 'type': 'place', 'name': 'Ride for student', 'start_time': '15:30', 'end_time': '17:00', 'description': 'B·∫°n s·∫Ω tham gia tr·∫£i nghi·ªám ƒë·∫°p xe quanh ph·ªë c·ªï ƒë·ªôc ƒë√°o.', 'address': 'H√† N·ªôi', 'categories': 'activity', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.5, 'price': 150000.0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_001958', 'type': 'restaurant', 'name': 'Vietnamese Family Meal', 'start_time': '18:00', 'end_time': '20:00', 'description': 'Th∆∞·ªüng th·ª©c b·ªØa t·ªëi truy·ªÅn th·ªëng ƒë·∫≠m ƒë√† h∆∞∆°ng v·ªã Vi·ªát.', 'address': 'H√† N·ªôi', 'cuisines': '·∫®m th·ª±c Vi·ªát Nam', 'price_range': '100,000-300,000 VND', 'rating': 4.6, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}]}], 'daily_tips': []}, {'date': '2025-05-12', 'day_title': 'Ng√†y 2: Kh√°m ph√° n√©t ƒë·∫πp vƒÉn h√≥a v√† ·∫©m th·ª±c H√† N·ªôi', 'segments': [{'time_of_day': 'morning', 'activities': [{'id': 'place_000416', 'type': 'place', 'name': 'Hanoi Group Travel', 'start_time': '08:00', 'end_time': '10:00', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c tr·∫£i nghi·ªám tour kh√°m ph√° H√† N·ªôi ƒë·ªôc ƒë√°o. Kh√°m ph√° vƒÉn h√≥a v√† l·ªãch s·ª≠ qua t·ª´ng b∆∞·ªõc ch√¢n.', 'address': 'H√† N·ªôi', 'categories': 'tour', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.7, 'price': 350000.0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_000688', 'type': 'place', 'name': 'Vietnam Hanoi Package Tours', 'start_time': '13:00', 'end_time': '15:00', 'description': 'Ch√∫ng ta s·∫Ω kh√°m ph√° nh·ªØng ƒëi·ªÉm ƒë·∫øn h·∫•p d·∫´n qua tour tr·ªçn g√≥i ch·∫•t l∆∞·ª£ng cao.', 'address': 'H√† N·ªôi', 'categories': 'sightseeing', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.6, 'price': 400000.0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_000098', 'type': 'restaurant', 'name': 'Family Restaurant', 'start_time': '18:00', 'end_time': '20:00', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c th∆∞·ªüng th·ª©c m√≥n ƒÉn truy·ªÅn th·ªëng ƒë·∫≠m ƒë√† h∆∞∆°ng v·ªã Vi·ªát. Kh√¥ng gian ·∫•m c√∫ng, th√¢n thi·ªán.', 'address': 'H√† N·ªôi', 'cuisines': 'ƒê·∫∑c s·∫£n ƒë·ªãa ph∆∞∆°ng', 'price_range': '100,000-300,000 VND', 'rating': 4.5, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}]}], 'daily_tips': []}, {'date': '2025-05-13', 'day_title': 'Ng√†y 3: H√†nh tr√¨nh tr·∫£i nghi·ªám vƒÉn h√≥a v√† ·∫©m th·ª±c', 'segments': [{'time_of_day': 'morning', 'activities': [{'id': 'place_000117', 'type': 'place', 'name': 'Avitour', 'start_time': '08:00', 'end_time': '10:30', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c kh√°m ph√° c√°c tour du l·ªãch ƒë·ªôc ƒë√°o t·∫°i Avitour. Ch√∫ng ta c√πng t√¨m hi·ªÉu l·ªãch s·ª≠ H√† N·ªôi.', 'address': 'H√† N·ªôi', 'categories': 'tour agency', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.7, 'price': 0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_000384', 'type': 'place', 'name': 'HOTEL de LAGOM', 'start_time': '13:00', 'end_time': '15:00', 'description': 'Ch√∫ng ta s·∫Ω chi√™m ng∆∞·ª°ng ki·∫øn tr√∫c ƒë·ªôc ƒë√°o v√† kh√¥ng gian ngh·ªá thu·∫≠t t·∫°i kh√°ch s·∫°n boutique n√†y.', 'address': 'H√† N·ªôi', 'categories': 'boutique hotel', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.6, 'price': 0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_000557', 'type': 'restaurant', 'name': 'The Hanoi Cafe', 'start_time': '18:00', 'end_time': '20:00', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c th∆∞·ªüng th·ª©c ·∫©m th·ª±c Vi·ªát Nam truy·ªÅn th·ªëng trong kh√¥ng gian ·∫•m c√∫ng t·∫°i The Hanoi Cafe.', 'address': 'H√† N·ªôi', 'cuisines': 'Vi·ªát Nam truy·ªÅn th·ªëng', 'price_range': '100,000-300,000 VND', 'rating': 4.5, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}]}], 'daily_tips': []}]}
2025-05-11 01:00:30,431 - src.services.genrate_plan_api - INFO - Trip plan request processed successfully
2025-05-11 01:01:02,322 - __mp_main__ - INFO - All routers registered successfully
2025-05-11 01:01:02,569 - app - INFO - All routers registered successfully
2025-05-11 01:01:07,974 - src.services.suggest_api - INFO - Processing recommendation query for hanoi
2025-05-11 01:01:07,989 - src.agents.travel_agent - INFO - Setting up all databases...
2025-05-11 01:01:10,487 - src.agents.travel_agent - INFO - All databases setup completed
2025-05-11 01:01:10,487 - src.agents.travel_agent - INFO - Processing query: 
        Planning a trip to hanoi with the following details:
        - Group: 2 adults, 1 children, 0 infants
        - Budget: mid (approx. 10000000 VND)
        - Duration: 10 days
        - Season: summer
        - Travel Style: family
        
        Preferences:
        - Transportation: No specific preference
        - Accommodation: Hotel
        - Food: Vegetarian
        - Places to visit: No specific preference
        - Activities: Hiking
        - Extra: No specific preference
        Please suggest:
        1. Suitable accommodations
        2. Interesting activities and places to visit
        3. Recommended restaurants and food options
        
        Consider:
        - The travel style and preferences
        - The season and weather conditions
        - The budget constraints
        - The duration of stay
        - The location and its unique offerings
        
2025-05-11 01:01:10,487 - src.agents.travel_agent - DEBUG - Sending request to OpenAI...
2025-05-11 01:01:12,472 - src.agents.travel_agent - INFO - OpenAI response: ChatCompletion(id='chatcmpl-BVinX1ilzGAdpc82NjTbveFJJsZ9o', choices=[Choice(finish_reason='function_call', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"family-friendly hotels in Hanoi with mid-range budget around 10000000 VND for 2 adults and 1 child in summer","top_k":15}', name='query_hotels'), tool_calls=None))], created=1746900071, model='gpt-4.1-mini-2025-04-14', object='chat.completion', service_tier='default', system_fingerprint='fp_79b79be41f', usage=CompletionUsage(completion_tokens=47, prompt_tokens=948, total_tokens=995, completion_tokens_details=CompletionTokensDetails(accepted_prediction_tokens=0, audio_tokens=0, reasoning_tokens=0, rejected_prediction_tokens=0), prompt_tokens_details=PromptTokensDetails(audio_tokens=0, cached_tokens=0)))
2025-05-11 01:01:12,473 - src.agents.travel_agent - INFO - Model response message: ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"family-friendly hotels in Hanoi with mid-range budget around 10000000 VND for 2 adults and 1 child in summer","top_k":15}', name='query_hotels'), tool_calls=None)
2025-05-11 01:01:12,474 - src.agents.travel_agent - INFO - Function call: query_hotels
2025-05-11 01:01:12,474 - src.agents.travel_agent - DEBUG - Function arguments: {'query_text': 'family-friendly hotels in Hanoi with mid-range budget around 10000000 VND for 2 adults and 1 child in summer', 'top_k': 15}
2025-05-11 01:01:12,474 - src.agents.travel_agent - INFO - Querying all databases with context
2025-05-11 01:01:12,474 - src.agents.travel_agent - INFO - Querying hotels with context: family-friendly hotels in Hanoi with mid-range budget around 10000000 VND for 2 adults and 1 child in summer
2025-05-11 01:01:15,955 - src.agents.travel_agent - INFO - Added 15 hotel recommendations
2025-05-11 01:01:15,955 - src.agents.travel_agent - INFO - Querying places with context: family-friendly hotels in Hanoi with mid-range budget around 10000000 VND for 2 adults and 1 child in summer
2025-05-11 01:01:18,719 - src.agents.travel_agent - INFO - place_ids: ['place_000068', 'place_009936', 'place_003155', 'place_003692', 'place_001445', 'place_005493', 'place_010755', 'place_004219', 'place_006634', 'place_009809', 'place_007237', 'place_005895', 'place_008450', 'place_001909', 'place_003348', 'place_009189', 'place_002934', 'place_002238', 'place_010085', 'place_008762', 'place_011025', 'place_002378', 'place_006736', 'place_004816', 'place_007979', 'place_000688', 'place_000543', 'place_000830', 'place_000345', 'place_000416', 'place_000010', 'place_007854', 'place_006512', 'place_004755', 'place_010621', 'place_005433', 'place_000117', 'place_000409', 'place_000583', 'place_000870']
2025-05-11 01:01:18,720 - src.agents.travel_agent - INFO - Added 40 place recommendations
2025-05-11 01:01:18,720 - src.agents.travel_agent - INFO - Querying restaurants with context: family-friendly hotels in Hanoi with mid-range budget around 10000000 VND for 2 adults and 1 child in summer
2025-05-11 01:01:18,720 - src.agents.travel_agent - INFO - Attempting to query FnB with text: family-friendly hotels in Hanoi with mid-range budget around 10000000 VND for 2 adults and 1 child in summer, top_k: 40
2025-05-11 01:01:21,979 - src.agents.travel_agent - INFO - FnB query returned 40 results
2025-05-11 01:01:21,980 - src.agents.travel_agent - INFO - Added 40 restaurant recommendations
2025-05-11 01:01:21,980 - src.agents.travel_agent - INFO - Final result distribution: 15 hotels, 40 places, 40 restaurants
2025-05-11 01:01:21,980 - src.services.suggest_api - INFO - Recommendation query processed successfully, got 95 items
2025-05-11 01:01:21,980 - src.services.suggest_api - INFO - Grouped recommendations: 15 accommodations, 40 places, 40 restaurants
2025-05-11 01:01:21,980 - src.services.suggest_api - INFO - Final response has 95 items
2025-05-11 01:01:22,081 - src.services.genrate_plan_api - INFO - Received raw trip plan request: dict_keys(['destination_id', 'accommodation', 'places', 'restaurants'])
2025-05-11 01:01:22,082 - src.services.genrate_plan_api - INFO - Extracted 15 accommodations, 40 places, and 40 restaurants
2025-05-11 01:01:22,082 - src.services.genrate_plan_api - INFO - Destination identified as: hanoi
2025-05-11 01:01:22,082 - src.services.genrate_plan_api - INFO - Generating plan with destination: hanoi
2025-05-11 01:01:57,124 - src.services.genrate_plan_api - INFO - Generated plan: {'trip_name': 'Trip to Hanoi', 'start_date': '2025-05-11', 'end_date': '2025-05-13', 'user_id': 'user123', 'destination_id': 'hanoi', 'plan_by_day': [{'date': '2025-05-11', 'day_title': 'Ng√†y 1: Kh√°m ph√° H√† N·ªôi c·ªï k√≠nh', 'segments': [{'time_of_day': 'morning', 'activities': [{'id': 'hotel_007760', 'type': 'accommodation', 'name': '22Land Residence Hotel & Spa 52 Ngo Huyen', 'start_time': '08:00', 'end_time': '10:00', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c t·∫≠n h∆∞·ªüng kh√¥ng gian sang tr·ªçng, ti·ªán nghi hi·ªán ƒë·∫°i.', 'location': 'H√† N·ªôi', 'rating': 4.7, 'price': 1200000.0, 'image_url': '', 'booking_link': '', 'room_info': 'Ph√≤ng ti√™u chu·∫©n', 'tax_info': 'ƒê√£ bao g·ªìm thu·∫ø', 'elderly_friendly': True, 'url': ''}]}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_000068', 'type': 'place', 'name': 'Green Pool', 'start_time': '13:00', 'end_time': '15:00', 'description': 'Ch√∫ng ta s·∫Ω th∆∞ gi√£n t·∫°i h·ªì n∆∞·ªõc trong xanh tuy·ªát ƒë·∫πp gi·ªØa l√≤ng th√†nh ph·ªë.', 'address': 'H√† N·ªôi', 'categories': 'nature', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.4, 'price': 0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_001672', 'type': 'restaurant', 'name': 'Song Huong Floating Restaurant', 'start_time': '18:00', 'end_time': '20:00', 'description': 'B·∫°n s·∫Ω th∆∞·ªüng th·ª©c h∆∞∆°ng v·ªã ƒë·∫∑c s·∫£n b√™n s√¥ng th∆° m·ªông.', 'address': 'H√† N·ªôi', 'cuisines': '·∫®m th·ª±c Vi·ªát Nam', 'price_range': '100,000-300,000 VND', 'rating': 4.6, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}]}], 'daily_tips': []}, {'date': '2025-05-12', 'day_title': 'Ng√†y 2: H√†nh tr√¨nh kh√°m ph√° vƒÉn h√≥a H√† N·ªôi', 'segments': [{'time_of_day': 'morning', 'activities': [{'id': 'place_009936', 'type': 'place', 'name': 'LƒÉng Ch·ªß t·ªãch H·ªì Ch√≠ Minh', 'start_time': '08:00', 'end_time': '10:00', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c t√¨m hi·ªÉu l·ªãch s·ª≠ v√† chi√™m ng∆∞·ª°ng ki·∫øn tr√∫c trang nghi√™m.', 'address': 'H√† N·ªôi', 'categories': 'historical', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.7, 'price': 30000.0, 'image_url': '', 'url': ''}, {'id': 'place_003155', 'type': 'place', 'name': 'Ch√πa M·ªôt C·ªôt', 'start_time': '10:15', 'end_time': '11:00', 'description': 'Ch√∫ng ta s·∫Ω tham quan bi·ªÉu t∆∞·ª£ng ki·∫øn tr√∫c ƒë·ªôc ƒë√°o gi·ªØa h·ªì sen.', 'address': 'H√† N·ªôi', 'categories': 'cultural', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.5, 'price': 20000.0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_005493', 'type': 'place', 'name': 'Ph·ªë c·ªï H√† N·ªôi', 'start_time': '13:00', 'end_time': '15:00', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c h√≤a m√¨nh v√†o nh·ªãp s·ªëng s√¥i ƒë·ªông v√† th∆∞·ªüng th·ª©c ·∫©m th·ª±c ƒë∆∞·ªùng ph·ªë.', 'address': 'H√† N·ªôi', 'categories': 'shopping, cultural', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.6, 'price': 0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_002224', 'type': 'restaurant', 'name': "Saigon's Book Hotel & Restaurant", 'start_time': '18:30', 'end_time': '20:00', 'description': 'Th∆∞·ªüng th·ª©c m√≥n ƒÉn truy·ªÅn th·ªëng trong kh√¥ng gian ·∫•m c√∫ng.', 'address': 'H√† N·ªôi', 'cuisines': 'Vi·ªát Nam', 'price_range': '100,000-300,000 VND', 'rating': 4.4, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}, {'id': 'place_007237', 'type': 'place', 'name': 'H·ªì Ho√†n Ki·∫øm', 'start_time': '20:15', 'end_time': '21:00', 'description': 'Ch√∫ng ta s·∫Ω ƒëi d·∫°o quanh h·ªì, t·∫≠n h∆∞·ªüng kh√¥ng kh√≠ m√°t m·∫ª v·ªÅ ƒë√™m.', 'address': 'H√† N·ªôi', 'categories': 'scenic', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.8, 'price': 0, 'image_url': '', 'url': ''}]}], 'daily_tips': []}, {'date': '2025-05-13', 'day_title': 'Ng√†y 3: Tr·∫£i nghi·ªám Spa v√† ·∫®m th·ª±c H√† N·ªôi', 'segments': [{'time_of_day': 'morning', 'activities': [{'id': 'place_007854', 'type': 'place', 'name': 'Eden Spa', 'start_time': '08:00', 'end_time': '10:30', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c th∆∞ gi√£n v·ªõi li·ªáu ph√°p spa truy·ªÅn th·ªëng tuy·ªát v·ªùi üßñ\u200d‚ôÄÔ∏è.', 'address': 'H√† N·ªôi', 'categories': 'wellness', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.7, 'price': 600000.0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_000688', 'type': 'place', 'name': 'Vietnam Hanoi Package Tours', 'start_time': '13:00', 'end_time': '15:00', 'description': 'Ch√∫ng ta s·∫Ω kh√°m ph√° c√°c tour vƒÉn h√≥a ƒë·ªôc ƒë√°o quanh H√† N·ªôi.', 'address': 'H√† N·ªôi', 'categories': 'cultural tour', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.6, 'price': 350000.0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_000623', 'type': 'restaurant', 'name': 'Little Hanoi Restaurants', 'start_time': '18:00', 'end_time': '20:00', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c th∆∞·ªüng th·ª©c c√°c m√≥n ƒÉn ƒë·∫≠m ƒë√† h∆∞∆°ng v·ªã H√† N·ªôi üåü.', 'address': 'H√† N·ªôi', 'cuisines': 'ƒê·∫∑c s·∫£n Vi·ªát Nam', 'price_range': '100,000-300,000 VND', 'rating': 4.5, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}]}], 'daily_tips': []}]}
2025-05-11 01:01:57,125 - src.services.genrate_plan_api - INFO - Trip plan request processed successfully
2025-05-11 01:03:28,797 - __mp_main__ - INFO - All routers registered successfully
2025-05-11 01:03:28,830 - app - INFO - All routers registered successfully
2025-05-11 01:03:48,391 - __mp_main__ - INFO - All routers registered successfully
2025-05-11 01:03:48,407 - app - INFO - All routers registered successfully
2025-05-11 01:04:12,127 - __mp_main__ - INFO - All routers registered successfully
2025-05-11 01:04:12,166 - app - INFO - All routers registered successfully
2025-05-11 01:04:27,523 - __mp_main__ - INFO - All routers registered successfully
2025-05-11 01:04:27,560 - app - INFO - All routers registered successfully
2025-05-11 01:04:27,567 - src.services.suggest_api - INFO - Processing recommendation query for hanoi
2025-05-11 01:04:27,577 - src.agents.travel_agent - INFO - Setting up all databases...
2025-05-11 01:04:29,602 - src.agents.travel_agent - INFO - All databases setup completed
2025-05-11 01:04:29,602 - src.agents.travel_agent - INFO - Processing query: 
        Planning a trip to hanoi with the following details:
        - Group: 2 adults, 1 children, 0 infants
        - Budget: mid (approx. 10000000 VND)
        - Duration: 10 days
        - Season: summer
        - Travel Style: family
        
        Preferences:
        - Transportation: No specific preference
        - Accommodation: Hotel
        - Food: Vegetarian
        - Places to visit: No specific preference
        - Activities: Hiking
        - Extra: No specific preference
        Please suggest:
        1. Suitable accommodations
        2. Interesting activities and places to visit
        3. Recommended restaurants and food options
        
        Consider:
        - The travel style and preferences
        - The season and weather conditions
        - The budget constraints
        - The duration of stay
        - The location and its unique offerings
        
2025-05-11 01:04:29,602 - src.agents.travel_agent - DEBUG - Sending request to OpenAI...
2025-05-11 01:04:31,563 - src.agents.travel_agent - INFO - OpenAI response: ChatCompletion(id='chatcmpl-BViqkSD9zokjBL92CfI5t7ubg7GIq', choices=[Choice(finish_reason='function_call', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"family-friendly hotel in Hanoi mid-range budget","top_k":15}', name='query_hotels'), tool_calls=None))], created=1746900270, model='gpt-4.1-mini-2025-04-14', object='chat.completion', service_tier='default', system_fingerprint='fp_79b79be41f', usage=CompletionUsage(completion_tokens=29, prompt_tokens=948, total_tokens=977, completion_tokens_details=CompletionTokensDetails(accepted_prediction_tokens=0, audio_tokens=0, reasoning_tokens=0, rejected_prediction_tokens=0), prompt_tokens_details=PromptTokensDetails(audio_tokens=0, cached_tokens=0)))
2025-05-11 01:04:31,564 - src.agents.travel_agent - INFO - Model response message: ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"family-friendly hotel in Hanoi mid-range budget","top_k":15}', name='query_hotels'), tool_calls=None)
2025-05-11 01:04:31,564 - src.agents.travel_agent - INFO - Function call: query_hotels
2025-05-11 01:04:31,564 - src.agents.travel_agent - DEBUG - Function arguments: {'query_text': 'family-friendly hotel in Hanoi mid-range budget', 'top_k': 15}
2025-05-11 01:04:31,564 - src.agents.travel_agent - INFO - Querying all databases with context
2025-05-11 01:04:31,564 - src.agents.travel_agent - INFO - Querying hotels with context: family-friendly hotel in Hanoi mid-range budget
2025-05-11 01:04:35,918 - src.agents.travel_agent - INFO - Added 15 hotel recommendations
2025-05-11 01:04:35,918 - src.agents.travel_agent - INFO - Querying places with context: family-friendly hotel in Hanoi mid-range budget
2025-05-11 01:04:39,036 - src.agents.travel_agent - INFO - place_ids: ['place_000345', 'place_010621', 'place_006512', 'place_007854', 'place_004755', 'place_005433', 'place_000068', 'place_000583', 'place_000728', 'place_000870', 'place_000416', 'place_000543', 'place_000688', 'place_000830', 'place_000384', 'place_000205', 'place_011374', 'place_011734', 'place_011097', 'place_011249', 'place_011825', 'place_011507', 'place_000117', 'place_000382', 'place_000010', 'place_000409', 'place_000220', 'place_009761', 'place_007809', 'place_004184', 'place_005388', 'place_006467', 'place_000924', 'place_004711', 'place_010577', 'place_000012', 'place_000463', 'place_000457', 'place_000387', 'place_000018']
2025-05-11 01:04:39,036 - src.agents.travel_agent - INFO - Added 40 place recommendations
2025-05-11 01:04:39,036 - src.agents.travel_agent - INFO - Querying restaurants with context: family-friendly hotel in Hanoi mid-range budget
2025-05-11 01:04:39,036 - src.agents.travel_agent - INFO - Attempting to query FnB with text: family-friendly hotel in Hanoi mid-range budget, top_k: 40
2025-05-11 01:04:41,868 - src.agents.travel_agent - INFO - FnB query returned 40 results
2025-05-11 01:04:41,869 - src.agents.travel_agent - INFO - Added 40 restaurant recommendations
2025-05-11 01:04:41,869 - src.agents.travel_agent - INFO - Final result distribution: 15 hotels, 40 places, 40 restaurants
2025-05-11 01:04:41,869 - src.services.suggest_api - INFO - Recommendation query processed successfully, got 95 items
2025-05-11 01:04:41,869 - src.services.suggest_api - INFO - Grouped recommendations: 15 accommodations, 40 places, 40 restaurants
2025-05-11 01:04:41,869 - src.services.suggest_api - INFO - Final response has 95 items
2025-05-11 01:04:41,989 - src.services.genrate_plan_api - INFO - Received raw trip plan request: dict_keys(['destination_id', 'accommodation', 'places', 'restaurants'])
2025-05-11 01:04:41,990 - src.services.genrate_plan_api - INFO - Extracted 15 accommodations, 40 places, and 40 restaurants
2025-05-11 01:04:41,990 - src.services.genrate_plan_api - INFO - Destination identified as: hanoi
2025-05-11 01:04:41,990 - src.services.genrate_plan_api - INFO - Generating plan with destination: hanoi
2025-05-11 01:05:00,106 - src.services.genrate_plan_api - INFO - Generated plan: {'trip_name': 'Trip to Hanoi', 'start_date': '2025-05-11', 'end_date': '2025-05-13', 'user_id': 'user123', 'destination_id': 'hanoi', 'plan_by_day': [{'date': '2025-05-11', 'day_title': 'Ng√†y 1: H√†nh tr√¨nh th∆∞ gi√£n t·∫°i H√† N·ªôi', 'segments': [{'time_of_day': 'morning', 'activities': [{'id': 'hotel_008170', 'type': 'accommodation', 'name': 'Luxury Hanoi Hotel', 'start_time': '08:00', 'end_time': '10:00', 'description': 'T·∫≠n h∆∞·ªüng s·ª± sang tr·ªçng v√† d·ªãch v·ª• chuy√™n nghi·ªáp t·∫°i Luxury Hanoi Hotel.', 'location': '', 'rating': 4.5, 'price': 0, 'image_url': '', 'booking_link': '', 'room_info': 'Ph√≤ng ti√™u chu·∫©n', 'tax_info': 'ƒê√£ bao g·ªìm thu·∫ø', 'elderly_friendly': True, 'url': ''}]}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_000583', 'type': 'place', 'name': 'Reliable Vietnam Travel', 'start_time': '13:00', 'end_time': '15:00', 'description': 'Kh√°m ph√° c√°c tour du l·ªãch ƒë·ªôc ƒë√°o v√† th√∫ v·ªã t·∫°i Reliable Vietnam Travel.', 'address': '', 'categories': 'sightseeing', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.0, 'price': 0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_000494', 'type': 'restaurant', 'name': 'Maison Sen', 'start_time': '18:00', 'end_time': '20:00', 'description': 'Th∆∞·ªüng th·ª©c ·∫©m th·ª±c tinh t·∫ø v√† ƒë·∫≥ng c·∫•p t·∫°i nh√† h√†ng Maison Sen.', 'address': '', 'cuisines': 'ƒê·∫∑c s·∫£n ƒë·ªãa ph∆∞∆°ng', 'price_range': '100,000-300,000 VND', 'rating': 4.2, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}]}], 'daily_tips': []}, {'date': '2025-05-12', 'day_title': 'Ng√†y 2: Kh√°m ph√° vƒÉn h√≥a H√† N·ªôi', 'segments': [{'time_of_day': 'morning', 'activities': [{'id': 'place_000688', 'type': 'place', 'name': 'Hanoi Old Quarter', 'start_time': '08:00', 'end_time': '10:00', 'description': 'Kh√°m ph√° l·ªãch s·ª≠ v√† vƒÉn h√≥a ƒë·∫≠m n√©t c·ªßa H√† N·ªôi t·∫°i Ph·ªë C·ªï.', 'address': 'Hanoi, Vietnam', 'categories': 'Historical Landmark, Cultural Experience', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.7, 'price': 0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_000345', 'type': 'place', 'name': 'Ride for student', 'start_time': '13:00', 'end_time': '15:00', 'description': 'Tr·∫£i nghi·ªám c·∫£m gi√°c m·ªõi l·∫° v·ªõi d·ªãch v·ª• xe ƒë·∫°p ƒë·ªôc ƒë√°o d√†nh cho sinh vi√™n.', 'address': 'Hanoi, Vietnam', 'categories': 'Cycling, Student Experience', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.3, 'price': 150000.0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_000432', 'type': 'restaurant', 'name': 'Peace vegan', 'start_time': '18:30', 'end_time': '20:30', 'description': 'Th∆∞·ªüng th·ª©c ·∫©m th·ª±c chay s√°ng t·∫°o v√† ngon mi·ªáng t·∫°i nh√† h√†ng Peace vegan.', 'address': 'Hanoi, Vietnam', 'cuisines': 'Chay, Vegan', 'price_range': '100,000-300,000 VND', 'rating': 4.6, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}]}], 'daily_tips': []}, {'date': '2025-05-13', 'day_title': 'Ng√†y 3: H√† N·ªôi - Th·ªß ƒë√¥ vƒÉn h√≥a ƒë·∫∑c s·∫Øc', 'segments': [{'time_of_day': 'morning', 'activities': [{'id': 'place_011374', 'type': 'place', 'name': 'Hanoi Old Quarter', 'start_time': '08:00', 'end_time': '10:00', 'description': 'Kh√°m ph√° b·ª©c tranh l·ªãch s·ª≠ c·ªßa H√† N·ªôi t·∫°i Ph·ªë c·ªï H√† Th√†nh.', 'address': 'Ho√†n Ki·∫øm, H√† N·ªôi', 'categories': 'sightseeing', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.8, 'price': 50000.0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_000688', 'type': 'place', 'name': 'Hanoi Group Travel', 'start_time': '13:00', 'end_time': '15:00', 'description': 'ThƒÉm th√¥ng tin du l·ªãch chi ti·∫øt t·∫°i Hanoi Group Travel.', 'address': '16 Phan Chu Trinh, Ho√†n Ki·∫øm, H√† N·ªôi', 'categories': 'travel agency', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.6, 'price': 0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_000160', 'type': 'restaurant', 'name': 'Little Vietnam', 'start_time': '18:00', 'end_time': '20:00', 'description': 'Th∆∞·ªüng th·ª©c ·∫©m th·ª±c truy·ªÅn th·ªëng Vi·ªát Nam t·∫°i Little Vietnam.', 'address': '21 Hang Gai, Ho√†n Ki·∫øm, H√† N·ªôi', 'cuisines': 'Vietnamese', 'price_range': '100,000-300,000 VND', 'rating': 4.7, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}]}], 'daily_tips': []}]}
2025-05-11 01:05:00,107 - src.services.genrate_plan_api - INFO - Trip plan request processed successfully
2025-05-11 01:06:02,639 - __mp_main__ - INFO - All routers registered successfully
2025-05-11 01:06:02,664 - app - INFO - All routers registered successfully
2025-05-11 01:06:32,443 - __mp_main__ - INFO - All routers registered successfully
2025-05-11 01:06:32,478 - app - INFO - All routers registered successfully
2025-05-11 01:06:32,480 - src.services.suggest_api - INFO - Processing recommendation query for hanoi
2025-05-11 01:06:32,488 - src.agents.travel_agent - INFO - Setting up all databases...
2025-05-11 01:06:34,702 - src.agents.travel_agent - INFO - All databases setup completed
2025-05-11 01:06:34,702 - src.agents.travel_agent - INFO - Processing query: 
        Planning a trip to hanoi with the following details:
        - Group: 2 adults, 1 children, 0 infants
        - Budget: mid (approx. 10000000 VND)
        - Duration: 10 days
        - Season: summer
        - Travel Style: family
        
        Preferences:
        - Transportation: No specific preference
        - Accommodation: Hotel
        - Food: Vegetarian
        - Places to visit: No specific preference
        - Activities: Hiking
        - Extra: No specific preference
        Please suggest:
        1. Suitable accommodations
        2. Interesting activities and places to visit
        3. Recommended restaurants and food options
        
        Consider:
        - The travel style and preferences
        - The season and weather conditions
        - The budget constraints
        - The duration of stay
        - The location and its unique offerings
        
2025-05-11 01:06:34,702 - src.agents.travel_agent - DEBUG - Sending request to OpenAI...
2025-05-11 01:06:37,493 - src.agents.travel_agent - INFO - OpenAI response: ChatCompletion(id='chatcmpl-BVismunYrNqrmRq5f2Hg9bT0SZbb3', choices=[Choice(finish_reason='function_call', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"Hanoi mid-range hotels suitable for family with children, comfortable for summer stay","top_k":15}', name='query_hotels'), tool_calls=None))], created=1746900396, model='gpt-4.1-mini-2025-04-14', object='chat.completion', service_tier='default', system_fingerprint='fp_79b79be41f', usage=CompletionUsage(completion_tokens=36, prompt_tokens=948, total_tokens=984, completion_tokens_details=CompletionTokensDetails(accepted_prediction_tokens=0, audio_tokens=0, reasoning_tokens=0, rejected_prediction_tokens=0), prompt_tokens_details=PromptTokensDetails(audio_tokens=0, cached_tokens=0)))
2025-05-11 01:06:37,493 - src.agents.travel_agent - INFO - Model response message: ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"Hanoi mid-range hotels suitable for family with children, comfortable for summer stay","top_k":15}', name='query_hotels'), tool_calls=None)
2025-05-11 01:06:37,494 - src.agents.travel_agent - INFO - Function call: query_hotels
2025-05-11 01:06:37,494 - src.agents.travel_agent - DEBUG - Function arguments: {'query_text': 'Hanoi mid-range hotels suitable for family with children, comfortable for summer stay', 'top_k': 15}
2025-05-11 01:06:37,494 - src.agents.travel_agent - INFO - Querying all databases with context
2025-05-11 01:06:37,494 - src.agents.travel_agent - INFO - Querying hotels with context: Hanoi mid-range hotels suitable for family with children, comfortable for summer stay
2025-05-11 01:06:42,650 - src.agents.travel_agent - INFO - Added 15 hotel recommendations
2025-05-11 01:06:42,651 - src.agents.travel_agent - INFO - Querying places with context: Hanoi mid-range hotels suitable for family with children, comfortable for summer stay
2025-05-11 01:06:45,248 - src.agents.travel_agent - INFO - place_ids: ['place_000068', 'place_000345', 'place_000416', 'place_000456', 'place_000409', 'place_004755', 'place_010621', 'place_006512', 'place_007854', 'place_005433', 'place_009936', 'place_003155', 'place_006736', 'place_005895', 'place_006634', 'place_010755', 'place_008450', 'place_009189', 'place_002934', 'place_004219', 'place_002238', 'place_008762', 'place_009809', 'place_001909', 'place_005493', 'place_003348', 'place_001445', 'place_010085', 'place_007237', 'place_011025', 'place_003692', 'place_002378', 'place_007979', 'place_004816', 'place_000061', 'place_001108', 'place_000870', 'place_000583', 'place_000728', 'place_000117']
2025-05-11 01:06:45,249 - src.agents.travel_agent - INFO - Added 40 place recommendations
2025-05-11 01:06:45,249 - src.agents.travel_agent - INFO - Querying restaurants with context: Hanoi mid-range hotels suitable for family with children, comfortable for summer stay
2025-05-11 01:06:45,249 - src.agents.travel_agent - INFO - Attempting to query FnB with text: Hanoi mid-range hotels suitable for family with children, comfortable for summer stay, top_k: 40
2025-05-11 01:06:48,197 - src.agents.travel_agent - INFO - FnB query returned 40 results
2025-05-11 01:06:48,197 - src.agents.travel_agent - INFO - Added 40 restaurant recommendations
2025-05-11 01:06:48,197 - src.agents.travel_agent - INFO - Final result distribution: 15 hotels, 40 places, 40 restaurants
2025-05-11 01:06:48,197 - src.services.suggest_api - INFO - Recommendation query processed successfully, got 95 items
2025-05-11 01:06:48,197 - src.services.suggest_api - INFO - Grouped recommendations: 15 accommodations, 40 places, 40 restaurants
2025-05-11 01:06:48,197 - src.services.suggest_api - INFO - Final response has 95 items
2025-05-11 01:06:48,301 - src.services.genrate_plan_api - INFO - Received raw trip plan request: dict_keys(['destination_id', 'accommodation', 'places', 'restaurants'])
2025-05-11 01:06:48,301 - src.services.genrate_plan_api - INFO - Extracted 15 accommodations, 40 places, and 40 restaurants
2025-05-11 01:06:48,301 - src.services.genrate_plan_api - INFO - Destination identified as: hanoi
2025-05-11 01:06:48,301 - src.services.genrate_plan_api - INFO - Generating plan with destination: hanoi
2025-05-11 01:07:42,009 - src.services.genrate_plan_api - INFO - Generated plan: {'trip_name': 'Trip to Hanoi', 'start_date': '2025-05-11', 'end_date': '2025-05-13', 'user_id': 'user123', 'destination_id': 'hanoi', 'plan_by_day': [{'date': '2025-05-11', 'day_title': 'Ng√†y 1: Kh√°m ph√° n√©t ƒë·∫πp truy·ªÅn th·ªëng H√† N·ªôi', 'segments': [{'time_of_day': 'morning', 'activities': [{'id': 'hotel_008170', 'type': 'accommodation', 'name': 'Luxury Hanoi Hotel', 'start_time': '09:00', 'end_time': '11:00', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c t·∫≠n h∆∞·ªüng kh√¥ng gian sang tr·ªçng v√† d·ªãch v·ª• chƒÉm s√≥c chuy√™n nghi·ªáp t·∫°i Luxury Hanoi Hotel.', 'location': '', 'rating': 4.5, 'price': 0, 'image_url': '', 'booking_link': '', 'room_info': 'Ph√≤ng ti√™u chu·∫©n', 'tax_info': 'ƒê√£ bao g·ªìm thu·∫ø', 'elderly_friendly': True, 'url': ''}]}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_000068', 'type': 'place', 'name': 'H·ªì xanh', 'start_time': '13:00', 'end_time': '15:00', 'description': 'H√≤a m√¨nh v√†o kh√¥ng gian y√™n b√¨nh c·ªßa H·ªì Xanh, n∆°i mang ƒë·∫øn c·∫£m gi√°c th∆∞ gi√£n v√† thanh b√¨nh.', 'address': '', 'categories': 'sightseeing', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.0, 'price': 0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_000098', 'type': 'restaurant', 'name': 'Nh√† h√†ng Gia ƒê√¨nh', 'start_time': '18:30', 'end_time': '20:30', 'description': 'Th∆∞·ªüng th·ª©c b·ªØa t·ªëi th√¢n m·∫≠t v√† ·∫•m c√∫ng t·∫°i Nh√† h√†ng Gia ƒê√¨nh v·ªõi nh·ªØng m√≥n ƒÉn ƒë·∫≠m ch·∫•t Vi·ªát.', 'address': '', 'cuisines': 'ƒê·∫∑c s·∫£n ƒë·ªãa ph∆∞∆°ng', 'price_range': '100,000-300,000 VND', 'rating': 4.2, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}]}], 'daily_tips': ['- Ch·ªçn kh√°ch s·∫°n ·ªü khu v·ª±c g·∫ßn Trung t√¢m H√† N·ªôi', '- Gh√© thƒÉm VƒÉn Mi·∫øu - Qu·ªëc T·ª≠ Gi√°m ƒë·ªÉ t√¨m hi·ªÉu l·ªãch s·ª≠ vƒÉn h√≥a Vi·ªát Nam', '- Th·ª≠ c√°c m√≥n ƒÉn ƒë∆∞·ªùng ph·ªë t·∫°i khu ch·ª£ ƒê·ªìng Xu√¢n', '- ƒê·ª´ng b·ªè l·ª° ph·ªë c·ªï H√† N·ªôi v√†o bu·ªïi t·ªëi ƒë·ªÉ tr·∫£i nghi·ªám kh√¥ng kh√≠ ƒë√™m ƒë·∫πp lung linh', '- C√¢n nh·∫Øc thu√™ guide ƒë·ªãa ph∆∞∆°ng ƒë·ªÉ hi·ªÉu r√µ h∆°n v·ªÅ ƒë·ªãa ƒëi·ªÉm du l·ªãch b·∫°n thƒÉm']}, {'date': '2025-05-12', 'day_title': 'Ng√†y 2: Kh√°m ph√° v·∫ª ƒë·∫πp l·ªãch s·ª≠ H√† N·ªôi', 'segments': [{'time_of_day': 'morning', 'activities': [{'id': 'place_000409', 'type': 'place', 'name': 'H.O.T Tourism', 'start_time': '08:00', 'end_time': '10:00', 'description': 'Kh√°m ph√° vƒÉn h√≥a v√† l·ªãch s·ª≠ H√† N·ªôi t·∫°i H.O.T Tourism.', 'address': 'H√† N·ªôi', 'categories': 'Cultural Experience', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.6, 'price': 200000.0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_000345', 'type': 'place', 'name': 'Ride for student', 'start_time': '13:00', 'end_time': '15:00', 'description': 'Tr·∫£i nghi·ªám c·∫£m gi√°c m·ªõi m·∫ª t·∫°i Ride for student.', 'address': 'H√† N·ªôi', 'categories': 'Entertainment', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.3, 'price': 150000.0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_001635', 'type': 'restaurant', 'name': 'Nam Phuong Restaurant', 'start_time': '18:00', 'end_time': '20:00', 'description': 'Th∆∞·ªüng th·ª©c h∆∞∆°ng v·ªã ·∫©m th·ª±c truy·ªÅn th·ªëng t·∫°i Nh√† h√†ng Nam Phuong.', 'address': 'H√† N·ªôi', 'cuisines': 'Vietnamese Cuisine', 'price_range': '100,000-300,000 VND', 'rating': 4.4, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}]}], 'daily_tips': ['- N√™n b·∫Øt ƒë·∫ßu s·ªõm t·ª´ 6-8h s√°ng ƒë·ªÉ tr√°nh n√≥ng v√† ƒë√¥ng ƒë√∫c', '- S·ª≠ d·ª•ng Grab ho·∫∑c Gojek ƒë·ªÉ di chuy·ªÉn thu·∫≠n ti·ªán ·ªü Hanoi', '- Lu√¥n mang theo n∆∞·ªõc u·ªëng v√† kem ch·ªëng n·∫Øng khi ƒëi tham quan', '- Th·ª≠ m√≥n ph·ªü ·ªü Ph·ªü Gia Truyen ho·∫∑c Ph·ªü 10 L√Ω Qu·ªëc S∆∞', '- Gh√© thƒÉm H·ªì G∆∞∆°m v√†o bu·ªïi t·ªëi ƒë·ªÉ ng·∫Øm c·∫£nh ƒë·∫πp v√† th∆∞ gi√£n', '- Mua s·∫Øm t·∫°i Ch·ª£ ƒê·ªìng Xu√¢n ƒë·ªÉ tr·∫£i nghi·ªám vƒÉn h√≥a ƒë·ªãa ph∆∞∆°ng', '- Tham quan VƒÉn Mi·∫øu - Qu·ªëc T·ª≠ Gi√°m ƒë·ªÉ hi·ªÉu v·ªÅ l·ªãch s·ª≠ v√† vƒÉn h√≥a ƒë·∫•t n∆∞·ªõc']}, {'date': '2025-05-13', 'day_title': 'Ng√†y 3: Kh√°m ph√° vƒÉn h√≥a H√† N·ªôi', 'segments': [{'time_of_day': 'morning', 'activities': [{'id': 'place_000456', 'type': 'place', 'name': 'Hoyt Farms', 'start_time': '08:00', 'end_time': '10:00', 'description': 'Kh√°m ph√° v·∫ª ƒë·∫πp t·ª± nhi√™n v√† n√¥ng nghi·ªáp t·∫°i Hoyt Farms.', 'address': 'H√† N·ªôi', 'categories': 'farms', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.7, 'price': 100000.0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_000870', 'type': 'place', 'name': 'Reliable Vietnam Travel', 'start_time': '13:00', 'end_time': '15:00', 'description': 'Tham quan ƒë·ªãa ƒëi·ªÉm du l·ªãch uy t√≠n ƒë·ªÉ t√¨m hi·ªÉu v·ªÅ vƒÉn h√≥a ƒë·ªãa ph∆∞∆°ng.', 'address': 'H√† N·ªôi', 'categories': 'travel agency', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.8, 'price': 80000.0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_000557', 'type': 'restaurant', 'name': 'The Hanoi Cafe', 'start_time': '18:00', 'end_time': '20:00', 'description': 'Th∆∞·ªüng th·ª©c ·∫©m th·ª±c ƒë·ªãa ph∆∞∆°ng t·∫°i The Hanoi Cafe v·ªõi kh√¥ng gian ·∫•m c√∫ng.', 'address': 'H√† N·ªôi', 'cuisines': 'ƒê·∫∑c s·∫£n H√† N·ªôi', 'price_range': '100,000-300,000 VND', 'rating': 4.6, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}]}], 'daily_tips': ['- B·∫Øt ƒë·∫ßu thƒÉm Hoyt Farms t·ª´ l√∫c 9h s√°ng ƒë·ªÉ tr√°nh ƒë√¥ng ƒë√∫c.', '- M·∫∑c ƒë·ªì tho·∫£i m√°i khi tham quan Hoyt Farms.', '- Ti·∫øt ki·ªám chi ph√≠ khi ƒëi du l·ªãch t·∫°i Reliable Vietnam Travel.', '- T√¥n tr·ªçng vƒÉn h√≥a ƒë·ªãa ph∆∞∆°ng khi giao ti·∫øp.', '- T∆∞∆°ng t√°c v·ªõi ng∆∞·ªùi d√¢n ƒë·ªãa ph∆∞∆°ng m·ªôt c√°ch t√¥n tr·ªçng.']}]}
2025-05-11 01:07:42,013 - src.services.genrate_plan_api - INFO - Trip plan request processed successfully
2025-05-11 01:14:30,944 - __mp_main__ - INFO - All routers registered successfully
2025-05-11 01:14:30,974 - app - INFO - All routers registered successfully
2025-05-11 01:15:51,283 - src.services.suggest_api - INFO - Processing recommendation query for hochiminh
2025-05-11 01:15:51,295 - src.agents.travel_agent - INFO - Setting up all databases...
2025-05-11 01:15:54,048 - src.agents.travel_agent - INFO - All databases setup completed
2025-05-11 01:15:54,050 - src.agents.travel_agent - INFO - Processing query: 
        Planning a trip to hochiminh with the following details:
        - Group: 2 adults, 1 children, 0 infants
        - Budget: mid (approx. 10000000 VND)
        - Duration: 10 days
        - Season: summer
        - Travel Style: family
        
        Preferences:
        - Transportation: No specific preference
        - Accommodation: Hotel
        - Food: Vegetarian
        - Places to visit: No specific preference
        - Activities: Hiking
        - Extra: No specific preference
        Please suggest:
        1. Suitable accommodations
        2. Interesting activities and places to visit
        3. Recommended restaurants and food options
        
        Consider:
        - The travel style and preferences
        - The season and weather conditions
        - The budget constraints
        - The duration of stay
        - The location and its unique offerings
        
2025-05-11 01:15:54,050 - src.agents.travel_agent - DEBUG - Sending request to OpenAI...
2025-05-11 01:15:55,997 - src.agents.travel_agent - INFO - OpenAI response: ChatCompletion(id='chatcmpl-BVj1nlCxxrJgXiu9t2Du4WZ9ArP5g', choices=[Choice(finish_reason='function_call', index=0, logprobs=None, message=ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"Ho Chi Minh family hotel mid budget summer","top_k":15}', name='query_hotels'), tool_calls=None))], created=1746900955, model='gpt-4.1-mini-2025-04-14', object='chat.completion', service_tier='default', system_fingerprint='fp_79b79be41f', usage=CompletionUsage(completion_tokens=29, prompt_tokens=949, total_tokens=978, completion_tokens_details=CompletionTokensDetails(accepted_prediction_tokens=0, audio_tokens=0, reasoning_tokens=0, rejected_prediction_tokens=0), prompt_tokens_details=PromptTokensDetails(audio_tokens=0, cached_tokens=0)))
2025-05-11 01:15:55,997 - src.agents.travel_agent - INFO - Model response message: ChatCompletionMessage(content=None, refusal=None, role='assistant', annotations=[], audio=None, function_call=FunctionCall(arguments='{"query_text":"Ho Chi Minh family hotel mid budget summer","top_k":15}', name='query_hotels'), tool_calls=None)
2025-05-11 01:15:55,997 - src.agents.travel_agent - INFO - Function call: query_hotels
2025-05-11 01:15:55,997 - src.agents.travel_agent - DEBUG - Function arguments: {'query_text': 'Ho Chi Minh family hotel mid budget summer', 'top_k': 15}
2025-05-11 01:15:55,998 - src.agents.travel_agent - INFO - Querying all databases with context
2025-05-11 01:15:55,998 - src.agents.travel_agent - INFO - Querying hotels with context: Ho Chi Minh family hotel mid budget summer
2025-05-11 01:16:00,096 - src.agents.travel_agent - INFO - Added 15 hotel recommendations
2025-05-11 01:16:00,097 - src.agents.travel_agent - INFO - Querying places with context: Ho Chi Minh family hotel mid budget summer
2025-05-11 01:16:03,016 - src.agents.travel_agent - INFO - place_ids: ['place_003410', 'place_008121', 'place_007379', 'place_008592', 'place_010147', 'place_008904', 'place_009998', 'place_006037', 'place_004958', 'place_002520', 'place_001971', 'place_001507', 'place_004281', 'place_003754', 'place_006878', 'place_003297', 'place_002996', 'place_009331', 'place_010897', 'place_005555', 'place_004354', 'place_009405', 'place_010971', 'place_006952', 'place_001580', 'place_006111', 'place_003069', 'place_010220', 'place_008978', 'place_002044', 'place_003483', 'place_007453', 'place_008195', 'place_005032', 'place_008666', 'place_002594', 'place_003827', 'place_005628', 'place_002150', 'place_005139']
2025-05-11 01:16:03,017 - src.agents.travel_agent - INFO - Added 40 place recommendations
2025-05-11 01:16:03,017 - src.agents.travel_agent - INFO - Querying restaurants with context: Ho Chi Minh family hotel mid budget summer
2025-05-11 01:16:03,017 - src.agents.travel_agent - INFO - Attempting to query FnB with text: Ho Chi Minh family hotel mid budget summer, top_k: 40
2025-05-11 01:16:06,019 - src.agents.travel_agent - INFO - FnB query returned 40 results
2025-05-11 01:16:06,019 - src.agents.travel_agent - INFO - Added 40 restaurant recommendations
2025-05-11 01:16:06,019 - src.agents.travel_agent - INFO - Final result distribution: 15 hotels, 40 places, 40 restaurants
2025-05-11 01:16:06,020 - src.services.suggest_api - INFO - Recommendation query processed successfully, got 95 items
2025-05-11 01:16:06,020 - src.services.suggest_api - INFO - Grouped recommendations: 15 accommodations, 40 places, 40 restaurants
2025-05-11 01:16:06,020 - src.services.suggest_api - INFO - Final response has 95 items
2025-05-11 01:16:06,178 - src.services.genrate_plan_api - INFO - Received raw trip plan request: dict_keys(['destination_id', 'accommodation', 'places', 'restaurants'])
2025-05-11 01:16:06,178 - src.services.genrate_plan_api - INFO - Extracted 15 accommodations, 40 places, and 40 restaurants
2025-05-11 01:16:06,178 - src.services.genrate_plan_api - INFO - Destination identified as: hochiminh
2025-05-11 01:16:06,178 - src.services.genrate_plan_api - INFO - Generating plan with destination: hochiminh
2025-05-11 01:17:09,278 - src.services.genrate_plan_api - INFO - Generated plan: {'trip_name': 'Trip to Hochiminh', 'start_date': '2025-05-11', 'end_date': '2025-05-13', 'user_id': 'user123', 'destination_id': 'hochiminh', 'plan_by_day': [{'date': '2025-05-11', 'day_title': 'Ng√†y 1: Kh√°m ph√° S√†i G√≤n hoa l·ªá', 'segments': [{'time_of_day': 'morning', 'activities': [{'id': 'hotel_001800', 'type': 'accommodation', 'name': 'Homestay Long Chi·ªÅu', 'start_time': '08:00', 'end_time': '10:00', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c t·∫≠n h∆∞·ªüng kh√¥ng gian ngh·ªâ d∆∞·ª°ng tho·∫£i m√°i.', 'location': 'H·ªì Ch√≠ Minh', 'rating': 4.5, 'price': 850000.0, 'image_url': '', 'booking_link': '', 'room_info': 'Ph√≤ng ti√™u chu·∫©n', 'tax_info': 'ƒê√£ bao g·ªìm thu·∫ø', 'elderly_friendly': True, 'url': ''}]}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_003410', 'type': 'place', 'name': 'Lac Hong Tours', 'start_time': '13:00', 'end_time': '15:00', 'description': 'Kh√°m ph√° vƒÉn h√≥a S√†i G√≤n v·ªõi nhi·ªÅu ho·∫°t ƒë·ªông th√∫ v·ªã.', 'address': 'H·ªì Ch√≠ Minh', 'categories': 'sightseeing', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.5, 'price': 50000.0, 'image_url': '', 'url': ''}, {'id': 'place_010220', 'type': 'place', 'name': 'Saigon Adventure Tours', 'start_time': '15:30', 'end_time': '17:30', 'description': 'Tr·∫£i nghi·ªám nh·ªØng tour th√∫ v·ªã gi·ªØa l√≤ng th√†nh ph·ªë.', 'address': 'H·ªì Ch√≠ Minh', 'categories': 'adventure', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.7, 'price': 100000.0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_001402', 'type': 'restaurant', 'name': 'Yu Chu', 'start_time': '19:00', 'end_time': '21:00', 'description': 'Th∆∞·ªüng th·ª©c ·∫©m th·ª±c Trung Hoa tinh t·∫ø.', 'address': 'H·ªì Ch√≠ Minh', 'cuisines': 'Chinese', 'price_range': '100,000-300,000 VND', 'rating': 4.6, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}]}], 'daily_tips': ['- B·∫Øt ƒë·∫ßu thƒÉm th√∫ ƒë·ªãa ƒëi·ªÉm s·ªõm t·ª´ 6-8h s√°ng ƒë·ªÉ tr√°nh ƒë√¥ng ƒë√∫c.', '- S·ª≠ d·ª•ng xe ƒë·∫°p ho·∫∑c ƒëi b·ªô ƒë·ªÉ kh√°m ph√° th√†nh ph·ªë.', '- D·ª± tr√π kho·∫£ng 600,000 VND cho m·ªôt ng√†y du l·ªãch.', '- Tr√°nh c√°c c·ª≠a h√†ng ƒë·∫Øt ti·ªÅn.', '- Chia s·∫ª b·ªØa ƒÉn ƒë·ªÉ ti·∫øt ki·ªám chi ph√≠.', '- Lu√¥n m·∫∑c ƒë·ªì l·ªãch s·ª± v√† t√¥n tr·ªçng vƒÉn h√≥a ƒë·ªãa ph∆∞∆°ng.']}, {'date': '2025-05-12', 'day_title': 'Ng√†y 2: Kh√°m ph√° S√†i G√≤n s√¥i ƒë·ªông', 'segments': [{'time_of_day': 'morning', 'activities': [{'id': 'place_008121', 'type': 'place', 'name': 'Lac Hong Tours', 'start_time': '08:00', 'end_time': '09:30', 'description': 'B·∫°n s·∫Ω ƒë∆∞·ª£c kh√°m ph√° vƒÉn h√≥a S√†i G√≤n th√∫ v·ªã.', 'address': 'Qu·∫≠n 1, TP HCM', 'categories': 'sightseeing', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.5, 'price': 100000.0, 'image_url': '', 'url': ''}, {'id': 'place_007379', 'type': 'place', 'name': 'ƒê·ªÅn Ng·ªçc Ho√†ng', 'start_time': '09:45', 'end_time': '11:00', 'description': 'Ch√∫ng ta s·∫Ω c·∫ßu nguy·ªán t·∫°i ƒë·ªÅn linh thi√™ng n√†y.', 'address': '73 Mai Th·ªã L·ª±u, Qu·∫≠n 1, TP HCM', 'categories': 'temple', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.3, 'price': 0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_008592', 'type': 'place', 'name': 'B·∫£o t√†ng Ch·ª©ng t√≠ch chi·∫øn tranh', 'start_time': '13:00', 'end_time': '15:00', 'description': 'H√£y t√¨m hi·ªÉu l·ªãch s·ª≠ th√¥ng qua nh·ªØng hi·ªán v·∫≠t s·ªëng ƒë·ªông.', 'address': '28 V√µ VƒÉn T·∫ßn, Qu·∫≠n 3, TP HCM', 'categories': 'museum', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.6, 'price': 40000.0, 'image_url': '', 'url': ''}, {'id': 'place_010147', 'type': 'place', 'name': 'Ch·ª£ B·∫øn Th√†nh', 'start_time': '15:15', 'end_time': '17:00', 'description': 'Mua s·∫Øm v√† tr·∫£i nghi·ªám ·∫©m th·ª±c ƒë∆∞·ªùng ph·ªë tuy·ªát v·ªùi.', 'address': 'Phan B·ªôi Ch√¢u, Qu·∫≠n 1, TP HCM', 'categories': 'market', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.2, 'price': 0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_001808', 'type': 'restaurant', 'name': 'Freedom Hostel Restaurant', 'start_time': '18:00', 'end_time': '19:30', 'description': 'Th∆∞·ªüng th·ª©c c√°c m√≥n ƒÉn phong ph√∫ trong kh√¥ng gian ·∫•m c√∫ng.', 'address': 'Qu·∫≠n 3, TP HCM', 'cuisines': 'Qu·ªëc t·∫ø', 'price_range': '100,000-300,000 VND', 'rating': 4.4, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}, {'id': 'restaurant_001355', 'type': 'restaurant', 'name': 'Ministry Social Club Saigon', 'start_time': '19:45', 'end_time': '21:30', 'description': 'Kh√°m ph√° th·ª±c ƒë∆°n ƒëa d·∫°ng v√† √¢m nh·∫°c s√¥i ƒë·ªông.', 'address': 'Qu·∫≠n 1, TP HCM', 'cuisines': 'Qu·ªëc t·∫ø', 'price_range': '100,000-300,000 VND', 'rating': 4.7, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}]}], 'daily_tips': ['N√™n b·∫Øt ƒë·∫ßu s·ªõm t·ª´ 6-8h s√°ng khi tham quan H·∫ßm C·ªß Chi ƒë·ªÉ tr√°nh ƒë√¥ng ƒë√∫c', 'Mua s·∫Øm th√¥ng minh t·∫°i Ch·ª£ B·∫øn Th√†nh ƒë·ªÉ c√≥ gi√° h·ª£p l√Ω', 'Th·ª≠ ƒë·ªì ƒÉn ƒë∆∞·ªùng ph·ªë t·∫°i c√°c qu√°n ƒÉn ƒë√¥ng kh√°ch ƒë·ªÉ an to√†n']}, {'date': '2025-05-13', 'day_title': 'Ng√†y 3: Chinh ph·ª•c ph·∫ßn c√≤n l·∫°i c·ªßa S√†i G√≤n', 'segments': [{'time_of_day': 'morning', 'activities': [{'id': 'place_004354', 'type': 'place', 'name': 'Saigon Adventure Tours', 'start_time': '08:00', 'end_time': '10:00', 'description': 'Tham gia tour kh√°m ph√° S√†i G√≤n ƒë·ªôc ƒë√°o.', 'address': 'TPHCM', 'categories': 'tour', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.7, 'price': 600000.0, 'image_url': '', 'url': ''}, {'id': 'place_009405', 'type': 'place', 'name': 'Saigon Adventure Tours', 'start_time': '10:30', 'end_time': '12:00', 'description': 'Kh√°m ph√° khu√¥n vi√™n ƒë·∫∑c s·∫Øc v√† vƒÉn h√≥a ƒë·ªãa ph∆∞∆°ng.', 'address': 'TPHCM', 'categories': 'tour', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.8, 'price': 700000.0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'afternoon', 'activities': [{'id': 'place_006952', 'type': 'place', 'name': 'Saigon Adventure Tours', 'start_time': '13:00', 'end_time': '15:00', 'description': 'Tham gia c√°c ho·∫°t ƒë·ªông th√∫ v·ªã v√† gi√°o d·ª•c.', 'address': 'TPHCM', 'categories': 'tour', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.6, 'price': 650000.0, 'image_url': '', 'url': ''}, {'id': 'place_001580', 'type': 'place', 'name': 'Saigon Adventure Tours', 'start_time': '15:30', 'end_time': '17:00', 'description': 'Th∆∞·ªüng th·ª©c b·∫£n s·∫Øc ƒë·ªãa ph∆∞∆°ng qua m·ªói con ƒë∆∞·ªùng.', 'address': 'TPHCM', 'categories': 'tour', 'duration': '2h', 'opening_hours': '08:00-17:00', 'rating': 4.9, 'price': 750000.0, 'image_url': '', 'url': ''}]}, {'time_of_day': 'evening', 'activities': [{'id': 'restaurant_002225', 'type': 'restaurant', 'name': "Saigon's Book Hotel & Restaurant", 'start_time': '18:00', 'end_time': '20:00', 'description': 'Th∆∞·ªüng th·ª©c b·ªØa t·ªëi ngon mi·ªáng.', 'address': 'TPHCM', 'cuisines': 'homestyle', 'price_range': '100,000-300,000 VND', 'rating': 4.5, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}, {'id': 'restaurant_000933', 'type': 'restaurant', 'name': 'Saigon SkyBar', 'start_time': '20:30', 'end_time': '22:00', 'description': 'Th∆∞·ªüng th·ª©c cocktail t·∫°i t·∫ßng th∆∞·ª£ng.', 'address': 'TPHCM', 'cuisines': 'bar', 'price_range': '100,000-300,000 VND', 'rating': 4.7, 'phone': '', 'services': ['ƒë·∫∑t b√†n'], 'image_url': '', 'url': ''}]}], 'daily_tips': ['N√™n ƒë·∫øn s·ªõm cho tour bu·ªïi s√°ng ƒë·ªÉ tr√°nh k·∫πt xe.', 'Mang ƒë·ªì ƒÉn nh·∫π v√† n∆∞·ªõc u·ªëng cho tour bu·ªïi chi·ªÅu.', 'ƒê·∫∑t ch·ªó tr∆∞·ªõc cho tour bu·ªïi t·ªëi ƒë·ªÉ tr√°nh ch·ªù ƒë·ª£i l√¢u v√† tƒÉng gi√° cho du kh√°ch n∆∞·ªõc ngo√†i.']}]}
2025-05-11 01:17:09,279 - src.services.genrate_plan_api - INFO - Trip plan request processed successfully
